import{r as G,R as Kt,j as g}from"./index-Dh7DDHe0.js";import{T as n,J as Mt,c as pe,I as Se,C as V,i as to,e as pr,a as dr,b as mr,d as fr,f as so,g as kr,h as xr,j as gr,v as Tr,p as yr,M as Ir,s as Cr,k as Er}from"./replicad_single-D3vJzVpQ.js";function gt(s,e=s.currentIndex()){let t=e+1;if(Bt(s,t)){const o=s.identifierNameAtIndex(e);return{isType:!1,leftName:o,rightName:o,endIndex:t}}if(t++,Bt(s,t))return{isType:!0,leftName:null,rightName:null,endIndex:t};if(t++,Bt(s,t))return{isType:!1,leftName:s.identifierNameAtIndex(e),rightName:s.identifierNameAtIndex(e+2),endIndex:t};if(t++,Bt(s,t))return{isType:!0,leftName:null,rightName:null,endIndex:t};throw new Error(`Unexpected import/export specifier at ${e}`)}function Bt(s,e){const t=s.tokens[e];return t.type===n.braceR||t.type===n.comma}const br=new Map([["quot",'"'],["amp","&"],["apos","'"],["lt","<"],["gt",">"],["nbsp"," "],["iexcl","¡"],["cent","¢"],["pound","£"],["curren","¤"],["yen","¥"],["brvbar","¦"],["sect","§"],["uml","¨"],["copy","©"],["ordf","ª"],["laquo","«"],["not","¬"],["shy","­"],["reg","®"],["macr","¯"],["deg","°"],["plusmn","±"],["sup2","²"],["sup3","³"],["acute","´"],["micro","µ"],["para","¶"],["middot","·"],["cedil","¸"],["sup1","¹"],["ordm","º"],["raquo","»"],["frac14","¼"],["frac12","½"],["frac34","¾"],["iquest","¿"],["Agrave","À"],["Aacute","Á"],["Acirc","Â"],["Atilde","Ã"],["Auml","Ä"],["Aring","Å"],["AElig","Æ"],["Ccedil","Ç"],["Egrave","È"],["Eacute","É"],["Ecirc","Ê"],["Euml","Ë"],["Igrave","Ì"],["Iacute","Í"],["Icirc","Î"],["Iuml","Ï"],["ETH","Ð"],["Ntilde","Ñ"],["Ograve","Ò"],["Oacute","Ó"],["Ocirc","Ô"],["Otilde","Õ"],["Ouml","Ö"],["times","×"],["Oslash","Ø"],["Ugrave","Ù"],["Uacute","Ú"],["Ucirc","Û"],["Uuml","Ü"],["Yacute","Ý"],["THORN","Þ"],["szlig","ß"],["agrave","à"],["aacute","á"],["acirc","â"],["atilde","ã"],["auml","ä"],["aring","å"],["aelig","æ"],["ccedil","ç"],["egrave","è"],["eacute","é"],["ecirc","ê"],["euml","ë"],["igrave","ì"],["iacute","í"],["icirc","î"],["iuml","ï"],["eth","ð"],["ntilde","ñ"],["ograve","ò"],["oacute","ó"],["ocirc","ô"],["otilde","õ"],["ouml","ö"],["divide","÷"],["oslash","ø"],["ugrave","ù"],["uacute","ú"],["ucirc","û"],["uuml","ü"],["yacute","ý"],["thorn","þ"],["yuml","ÿ"],["OElig","Œ"],["oelig","œ"],["Scaron","Š"],["scaron","š"],["Yuml","Ÿ"],["fnof","ƒ"],["circ","ˆ"],["tilde","˜"],["Alpha","Α"],["Beta","Β"],["Gamma","Γ"],["Delta","Δ"],["Epsilon","Ε"],["Zeta","Ζ"],["Eta","Η"],["Theta","Θ"],["Iota","Ι"],["Kappa","Κ"],["Lambda","Λ"],["Mu","Μ"],["Nu","Ν"],["Xi","Ξ"],["Omicron","Ο"],["Pi","Π"],["Rho","Ρ"],["Sigma","Σ"],["Tau","Τ"],["Upsilon","Υ"],["Phi","Φ"],["Chi","Χ"],["Psi","Ψ"],["Omega","Ω"],["alpha","α"],["beta","β"],["gamma","γ"],["delta","δ"],["epsilon","ε"],["zeta","ζ"],["eta","η"],["theta","θ"],["iota","ι"],["kappa","κ"],["lambda","λ"],["mu","μ"],["nu","ν"],["xi","ξ"],["omicron","ο"],["pi","π"],["rho","ρ"],["sigmaf","ς"],["sigma","σ"],["tau","τ"],["upsilon","υ"],["phi","φ"],["chi","χ"],["psi","ψ"],["omega","ω"],["thetasym","ϑ"],["upsih","ϒ"],["piv","ϖ"],["ensp"," "],["emsp"," "],["thinsp"," "],["zwnj","‌"],["zwj","‍"],["lrm","‎"],["rlm","‏"],["ndash","–"],["mdash","—"],["lsquo","‘"],["rsquo","’"],["sbquo","‚"],["ldquo","“"],["rdquo","”"],["bdquo","„"],["dagger","†"],["Dagger","‡"],["bull","•"],["hellip","…"],["permil","‰"],["prime","′"],["Prime","″"],["lsaquo","‹"],["rsaquo","›"],["oline","‾"],["frasl","⁄"],["euro","€"],["image","ℑ"],["weierp","℘"],["real","ℜ"],["trade","™"],["alefsym","ℵ"],["larr","←"],["uarr","↑"],["rarr","→"],["darr","↓"],["harr","↔"],["crarr","↵"],["lArr","⇐"],["uArr","⇑"],["rArr","⇒"],["dArr","⇓"],["hArr","⇔"],["forall","∀"],["part","∂"],["exist","∃"],["empty","∅"],["nabla","∇"],["isin","∈"],["notin","∉"],["ni","∋"],["prod","∏"],["sum","∑"],["minus","−"],["lowast","∗"],["radic","√"],["prop","∝"],["infin","∞"],["ang","∠"],["and","∧"],["or","∨"],["cap","∩"],["cup","∪"],["int","∫"],["there4","∴"],["sim","∼"],["cong","≅"],["asymp","≈"],["ne","≠"],["equiv","≡"],["le","≤"],["ge","≥"],["sub","⊂"],["sup","⊃"],["nsub","⊄"],["sube","⊆"],["supe","⊇"],["oplus","⊕"],["otimes","⊗"],["perp","⊥"],["sdot","⋅"],["lceil","⌈"],["rceil","⌉"],["lfloor","⌊"],["rfloor","⌋"],["lang","〈"],["rang","〉"],["loz","◊"],["spades","♠"],["clubs","♣"],["hearts","♥"],["diams","♦"]]);function no(s){const[e,t]=Dn(s.jsxPragma||"React.createElement"),[o,i]=Dn(s.jsxFragmentPragma||"React.Fragment");return{base:e,suffix:t,fragmentBase:o,fragmentSuffix:i}}function Dn(s){let e=s.indexOf(".");return e===-1&&(e=s.length),[s.slice(0,e),s.slice(e)]}class fe{getPrefixCode(){return""}getHoistedCode(){return""}getSuffixCode(){return""}}class Ge extends fe{__init(){this.lastLineNumber=1}__init2(){this.lastIndex=0}__init3(){this.filenameVarName=null}__init4(){this.esmAutomaticImportNameResolutions={}}__init5(){this.cjsAutomaticModuleNameResolutions={}}constructor(e,t,o,i,a){super(),this.rootTransformer=e,this.tokens=t,this.importProcessor=o,this.nameManager=i,this.options=a,Ge.prototype.__init.call(this),Ge.prototype.__init2.call(this),Ge.prototype.__init3.call(this),Ge.prototype.__init4.call(this),Ge.prototype.__init5.call(this),this.jsxPragmaInfo=no(a),this.isAutomaticRuntime=a.jsxRuntime==="automatic",this.jsxImportSource=a.jsxImportSource||"react"}process(){return this.tokens.matches1(n.jsxTagStart)?(this.processJSXTag(),!0):!1}getPrefixCode(){let e="";if(this.filenameVarName&&(e+=`const ${this.filenameVarName} = ${JSON.stringify(this.options.filePath||"")};`),this.isAutomaticRuntime)if(this.importProcessor)for(const[t,o]of Object.entries(this.cjsAutomaticModuleNameResolutions))e+=`var ${o} = require("${t}");`;else{const{createElement:t,...o}=this.esmAutomaticImportNameResolutions;t&&(e+=`import {createElement as ${t}} from "${this.jsxImportSource}";`);const i=Object.entries(o).map(([a,h])=>`${a} as ${h}`).join(", ");if(i){const a=this.jsxImportSource+(this.options.production?"/jsx-runtime":"/jsx-dev-runtime");e+=`import {${i}} from "${a}";`}}return e}processJSXTag(){const{jsxRole:e,start:t}=this.tokens.currentToken(),o=this.options.production?null:this.getElementLocationCode(t);this.isAutomaticRuntime&&e!==Mt.KeyAfterPropSpread?this.transformTagToJSXFunc(o,e):this.transformTagToCreateElement(o)}getElementLocationCode(e){return`lineNumber: ${this.getLineNumberForIndex(e)}`}getLineNumberForIndex(e){const t=this.tokens.code;for(;this.lastIndex<e&&this.lastIndex<t.length;)t[this.lastIndex]===`
`&&this.lastLineNumber++,this.lastIndex++;return this.lastLineNumber}transformTagToJSXFunc(e,t){const o=t===Mt.StaticChildren;this.tokens.replaceToken(this.getJSXFuncInvocationCode(o));let i=null;if(this.tokens.matches1(n.jsxTagEnd))this.tokens.replaceToken(`${this.getFragmentCode()}, {`),this.processAutomaticChildrenAndEndProps(t);else{if(this.processTagIntro(),this.tokens.appendCode(", {"),i=this.processProps(!0),this.tokens.matches2(n.slash,n.jsxTagEnd))this.tokens.appendCode("}");else if(this.tokens.matches1(n.jsxTagEnd))this.tokens.removeToken(),this.processAutomaticChildrenAndEndProps(t);else throw new Error("Expected either /> or > at the end of the tag.");i&&this.tokens.appendCode(`, ${i}`)}for(this.options.production||(i===null&&this.tokens.appendCode(", void 0"),this.tokens.appendCode(`, ${o}, ${this.getDevSource(e)}, this`)),this.tokens.removeInitialToken();!this.tokens.matches1(n.jsxTagEnd);)this.tokens.removeToken();this.tokens.replaceToken(")")}transformTagToCreateElement(e){if(this.tokens.replaceToken(this.getCreateElementInvocationCode()),this.tokens.matches1(n.jsxTagEnd))this.tokens.replaceToken(`${this.getFragmentCode()}, null`),this.processChildren(!0);else if(this.processTagIntro(),this.processPropsObjectWithDevInfo(e),!this.tokens.matches2(n.slash,n.jsxTagEnd))if(this.tokens.matches1(n.jsxTagEnd))this.tokens.removeToken(),this.processChildren(!0);else throw new Error("Expected either /> or > at the end of the tag.");for(this.tokens.removeInitialToken();!this.tokens.matches1(n.jsxTagEnd);)this.tokens.removeToken();this.tokens.replaceToken(")")}getJSXFuncInvocationCode(e){return this.options.production?e?this.claimAutoImportedFuncInvocation("jsxs","/jsx-runtime"):this.claimAutoImportedFuncInvocation("jsx","/jsx-runtime"):this.claimAutoImportedFuncInvocation("jsxDEV","/jsx-dev-runtime")}getCreateElementInvocationCode(){if(this.isAutomaticRuntime)return this.claimAutoImportedFuncInvocation("createElement","");{const{jsxPragmaInfo:e}=this;return`${this.importProcessor&&this.importProcessor.getIdentifierReplacement(e.base)||e.base}${e.suffix}(`}}getFragmentCode(){if(this.isAutomaticRuntime)return this.claimAutoImportedName("Fragment",this.options.production?"/jsx-runtime":"/jsx-dev-runtime");{const{jsxPragmaInfo:e}=this;return(this.importProcessor&&this.importProcessor.getIdentifierReplacement(e.fragmentBase)||e.fragmentBase)+e.fragmentSuffix}}claimAutoImportedFuncInvocation(e,t){const o=this.claimAutoImportedName(e,t);return this.importProcessor?`${o}.call(void 0, `:`${o}(`}claimAutoImportedName(e,t){if(this.importProcessor){const o=this.jsxImportSource+t;return this.cjsAutomaticModuleNameResolutions[o]||(this.cjsAutomaticModuleNameResolutions[o]=this.importProcessor.getFreeIdentifierForPath(o)),`${this.cjsAutomaticModuleNameResolutions[o]}.${e}`}else return this.esmAutomaticImportNameResolutions[e]||(this.esmAutomaticImportNameResolutions[e]=this.nameManager.claimFreeName(`_${e}`)),this.esmAutomaticImportNameResolutions[e]}processTagIntro(){let e=this.tokens.currentIndex()+1;for(;this.tokens.tokens[e].isType||!this.tokens.matches2AtIndex(e-1,n.jsxName,n.jsxName)&&!this.tokens.matches2AtIndex(e-1,n.greaterThan,n.jsxName)&&!this.tokens.matches1AtIndex(e,n.braceL)&&!this.tokens.matches1AtIndex(e,n.jsxTagEnd)&&!this.tokens.matches2AtIndex(e,n.slash,n.jsxTagEnd);)e++;if(e===this.tokens.currentIndex()+1){const t=this.tokens.identifierName();oo(t)&&this.tokens.replaceToken(`'${t}'`)}for(;this.tokens.currentIndex()<e;)this.rootTransformer.processToken()}processPropsObjectWithDevInfo(e){const t=this.options.production?"":`__self: this, __source: ${this.getDevSource(e)}`;if(!this.tokens.matches1(n.jsxName)&&!this.tokens.matches1(n.braceL)){t?this.tokens.appendCode(`, {${t}}`):this.tokens.appendCode(", null");return}this.tokens.appendCode(", {"),this.processProps(!1),t?this.tokens.appendCode(` ${t}}`):this.tokens.appendCode("}")}processProps(e){let t=null;for(;;){if(this.tokens.matches2(n.jsxName,n.eq)){const o=this.tokens.identifierName();if(e&&o==="key"){t!==null&&this.tokens.appendCode(t.replace(/[^\n]/g,"")),this.tokens.removeToken(),this.tokens.removeToken();const i=this.tokens.snapshot();this.processPropValue(),t=this.tokens.dangerouslyGetAndRemoveCodeSinceSnapshot(i);continue}else this.processPropName(o),this.tokens.replaceToken(": "),this.processPropValue()}else if(this.tokens.matches1(n.jsxName)){const o=this.tokens.identifierName();this.processPropName(o),this.tokens.appendCode(": true")}else if(this.tokens.matches1(n.braceL))this.tokens.replaceToken(""),this.rootTransformer.processBalancedCode(),this.tokens.replaceToken("");else break;this.tokens.appendCode(",")}return t}processPropName(e){e.includes("-")?this.tokens.replaceToken(`'${e}'`):this.tokens.copyToken()}processPropValue(){this.tokens.matches1(n.braceL)?(this.tokens.replaceToken(""),this.rootTransformer.processBalancedCode(),this.tokens.replaceToken("")):this.tokens.matches1(n.jsxTagStart)?this.processJSXTag():this.processStringPropValue()}processStringPropValue(){const e=this.tokens.currentToken(),t=this.tokens.code.slice(e.start+1,e.end-1),o=Pn(t),i=Nr(t);this.tokens.replaceToken(i+o)}processAutomaticChildrenAndEndProps(e){e===Mt.StaticChildren?(this.tokens.appendCode(" children: ["),this.processChildren(!1),this.tokens.appendCode("]}")):(e===Mt.OneChild&&this.tokens.appendCode(" children: "),this.processChildren(!1),this.tokens.appendCode("}"))}processChildren(e){let t=e;for(;;){if(this.tokens.matches2(n.jsxTagStart,n.slash))return;let o=!1;if(this.tokens.matches1(n.braceL))this.tokens.matches2(n.braceL,n.braceR)?(this.tokens.replaceToken(""),this.tokens.replaceToken("")):(this.tokens.replaceToken(t?", ":""),this.rootTransformer.processBalancedCode(),this.tokens.replaceToken(""),o=!0);else if(this.tokens.matches1(n.jsxTagStart))this.tokens.appendCode(t?", ":""),this.processJSXTag(),o=!0;else if(this.tokens.matches1(n.jsxText)||this.tokens.matches1(n.jsxEmptyText))o=this.processChildTextElement(t);else throw new Error("Unexpected token when processing JSX children.");o&&(t=!0)}}processChildTextElement(e){const t=this.tokens.currentToken(),o=this.tokens.code.slice(t.start,t.end),i=Pn(o),a=wr(o);return a==='""'?(this.tokens.replaceToken(i),!1):(this.tokens.replaceToken(`${e?", ":""}${a}${i}`),!0)}getDevSource(e){return`{fileName: ${this.getFilenameVarName()}, ${e}}`}getFilenameVarName(){return this.filenameVarName||(this.filenameVarName=this.nameManager.claimFreeName("_jsxFileName")),this.filenameVarName}}function oo(s){const e=s.charCodeAt(0);return e>=pe.lowercaseA&&e<=pe.lowercaseZ}function wr(s){let e="",t="",o=!1,i=!1;for(let a=0;a<s.length;a++){const h=s[a];if(h===" "||h==="	"||h==="\r")o||(t+=h);else if(h===`
`)t="",o=!0;else{if(i&&o&&(e+=" "),e+=t,t="",h==="&"){const{entity:d,newI:T}=ro(s,a+1);a=T-1,e+=d}else e+=h;i=!0,o=!1}}return o||(e+=t),JSON.stringify(e)}function Pn(s){let e=0,t=0;for(const o of s)o===`
`?(e++,t=0):o===" "&&t++;return`
`.repeat(e)+" ".repeat(t)}function Nr(s){let e="";for(let t=0;t<s.length;t++){const o=s[t];if(o===`
`)if(/\s/.test(s[t+1]))for(e+=" ";t<s.length&&/\s/.test(s[t+1]);)t++;else e+=`
`;else if(o==="&"){const{entity:i,newI:a}=ro(s,t+1);e+=i,t=a-1}else e+=o}return JSON.stringify(e)}function ro(s,e){let t="",o=0,i,a=e;if(s[a]==="#"){let h=10;a++;let d;if(s[a]==="x")for(h=16,a++,d=a;a<s.length&&Ar(s.charCodeAt(a));)a++;else for(d=a;a<s.length&&vr(s.charCodeAt(a));)a++;if(s[a]===";"){const T=s.slice(d,a);T&&(a++,i=String.fromCodePoint(parseInt(T,h)))}}else for(;a<s.length&&o++<10;){const h=s[a];if(a++,h===";"){i=br.get(t);break}t+=h}return i?{entity:i,newI:a}:{entity:"&",newI:e}}function vr(s){return s>=pe.digit0&&s<=pe.digit9}function Ar(s){return s>=pe.digit0&&s<=pe.digit9||s>=pe.lowercaseA&&s<=pe.lowercaseF||s>=pe.uppercaseA&&s<=pe.uppercaseF}function io(s,e){const t=no(e),o=new Set;for(let i=0;i<s.tokens.length;i++){const a=s.tokens[i];if(a.type===n.name&&!a.isType&&(a.identifierRole===Se.Access||a.identifierRole===Se.ObjectShorthand||a.identifierRole===Se.ExportAccess)&&!a.shadowsGlobal&&o.add(s.identifierNameForToken(a)),a.type===n.jsxTagStart&&o.add(t.base),a.type===n.jsxTagStart&&i+1<s.tokens.length&&s.tokens[i+1].type===n.jsxTagEnd&&(o.add(t.base),o.add(t.fragmentBase)),a.type===n.jsxName&&a.identifierRole===Se.Access){const h=s.identifierNameForToken(a);(!oo(h)||s.tokens[i+1].type===n.dot)&&o.add(s.identifierNameForToken(a))}}return o}class Je{__init(){this.nonTypeIdentifiers=new Set}__init2(){this.importInfoByPath=new Map}__init3(){this.importsToReplace=new Map}__init4(){this.identifierReplacements=new Map}__init5(){this.exportBindingsByLocalName=new Map}constructor(e,t,o,i,a,h,d){this.nameManager=e,this.tokens=t,this.enableLegacyTypeScriptModuleInterop=o,this.options=i,this.isTypeScriptTransformEnabled=a,this.keepUnusedImports=h,this.helperManager=d,Je.prototype.__init.call(this),Je.prototype.__init2.call(this),Je.prototype.__init3.call(this),Je.prototype.__init4.call(this),Je.prototype.__init5.call(this)}preprocessTokens(){for(let e=0;e<this.tokens.tokens.length;e++)this.tokens.matches1AtIndex(e,n._import)&&!this.tokens.matches3AtIndex(e,n._import,n.name,n.eq)&&this.preprocessImportAtIndex(e),this.tokens.matches1AtIndex(e,n._export)&&!this.tokens.matches2AtIndex(e,n._export,n.eq)&&this.preprocessExportAtIndex(e);this.generateImportReplacements()}pruneTypeOnlyImports(){this.nonTypeIdentifiers=io(this.tokens,this.options);for(const[e,t]of this.importInfoByPath.entries()){if(t.hasBareImport||t.hasStarExport||t.exportStarNames.length>0||t.namedExports.length>0)continue;[...t.defaultNames,...t.wildcardNames,...t.namedImports.map(({localName:i})=>i)].every(i=>this.shouldAutomaticallyElideImportedName(i))&&this.importsToReplace.set(e,"")}}shouldAutomaticallyElideImportedName(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&!this.nonTypeIdentifiers.has(e)}generateImportReplacements(){for(const[e,t]of this.importInfoByPath.entries()){const{defaultNames:o,wildcardNames:i,namedImports:a,namedExports:h,exportStarNames:d,hasStarExport:T}=t;if(o.length===0&&i.length===0&&a.length===0&&h.length===0&&d.length===0&&!T){this.importsToReplace.set(e,`require('${e}');`);continue}const m=this.getFreeIdentifierForPath(e);let f;this.enableLegacyTypeScriptModuleInterop?f=m:f=i.length>0?i[0]:this.getFreeIdentifierForPath(e);let k=`var ${m} = require('${e}');`;if(i.length>0)for(const C of i){const I=this.enableLegacyTypeScriptModuleInterop?m:`${this.helperManager.getHelperName("interopRequireWildcard")}(${m})`;k+=` var ${C} = ${I};`}else d.length>0&&f!==m?k+=` var ${f} = ${this.helperManager.getHelperName("interopRequireWildcard")}(${m});`:o.length>0&&f!==m&&(k+=` var ${f} = ${this.helperManager.getHelperName("interopRequireDefault")}(${m});`);for(const{importedName:C,localName:I}of h)k+=` ${this.helperManager.getHelperName("createNamedExportFrom")}(${m}, '${I}', '${C}');`;for(const C of d)k+=` exports.${C} = ${f};`;T&&(k+=` ${this.helperManager.getHelperName("createStarExport")}(${m});`),this.importsToReplace.set(e,k);for(const C of o)this.identifierReplacements.set(C,`${f}.default`);for(const{importedName:C,localName:I}of a)this.identifierReplacements.set(I,`${m}.${C}`)}}getFreeIdentifierForPath(e){const t=e.split("/"),i=t[t.length-1].replace(/\W/g,"");return this.nameManager.claimFreeName(`_${i}`)}preprocessImportAtIndex(e){const t=[],o=[],i=[];if(e++,(this.tokens.matchesContextualAtIndex(e,V._type)||this.tokens.matches1AtIndex(e,n._typeof))&&!this.tokens.matches1AtIndex(e+1,n.comma)&&!this.tokens.matchesContextualAtIndex(e+1,V._from)||this.tokens.matches1AtIndex(e,n.parenL))return;if(this.tokens.matches1AtIndex(e,n.name)&&(t.push(this.tokens.identifierNameAtIndex(e)),e++,this.tokens.matches1AtIndex(e,n.comma)&&e++),this.tokens.matches1AtIndex(e,n.star)&&(e+=2,o.push(this.tokens.identifierNameAtIndex(e)),e++),this.tokens.matches1AtIndex(e,n.braceL)){const d=this.getNamedImports(e+1);e=d.newIndex;for(const T of d.namedImports)T.importedName==="default"?t.push(T.localName):i.push(T)}if(this.tokens.matchesContextualAtIndex(e,V._from)&&e++,!this.tokens.matches1AtIndex(e,n.string))throw new Error("Expected string token at the end of import statement.");const a=this.tokens.stringValueAtIndex(e),h=this.getImportInfo(a);h.defaultNames.push(...t),h.wildcardNames.push(...o),h.namedImports.push(...i),t.length===0&&o.length===0&&i.length===0&&(h.hasBareImport=!0)}preprocessExportAtIndex(e){if(this.tokens.matches2AtIndex(e,n._export,n._var)||this.tokens.matches2AtIndex(e,n._export,n._let)||this.tokens.matches2AtIndex(e,n._export,n._const))this.preprocessVarExportAtIndex(e);else if(this.tokens.matches2AtIndex(e,n._export,n._function)||this.tokens.matches2AtIndex(e,n._export,n._class)){const t=this.tokens.identifierNameAtIndex(e+2);this.addExportBinding(t,t)}else if(this.tokens.matches3AtIndex(e,n._export,n.name,n._function)){const t=this.tokens.identifierNameAtIndex(e+3);this.addExportBinding(t,t)}else this.tokens.matches2AtIndex(e,n._export,n.braceL)?this.preprocessNamedExportAtIndex(e):this.tokens.matches2AtIndex(e,n._export,n.star)&&this.preprocessExportStarAtIndex(e)}preprocessVarExportAtIndex(e){let t=0;for(let o=e+2;;o++)if(this.tokens.matches1AtIndex(o,n.braceL)||this.tokens.matches1AtIndex(o,n.dollarBraceL)||this.tokens.matches1AtIndex(o,n.bracketL))t++;else if(this.tokens.matches1AtIndex(o,n.braceR)||this.tokens.matches1AtIndex(o,n.bracketR))t--;else{if(t===0&&!this.tokens.matches1AtIndex(o,n.name))break;if(this.tokens.matches1AtIndex(1,n.eq)){const i=this.tokens.currentToken().rhsEndIndex;if(i==null)throw new Error("Expected = token with an end index.");o=i-1}else{const i=this.tokens.tokens[o];if(to(i)){const a=this.tokens.identifierNameAtIndex(o);this.identifierReplacements.set(a,`exports.${a}`)}}}}preprocessNamedExportAtIndex(e){e+=2;const{newIndex:t,namedImports:o}=this.getNamedImports(e);if(e=t,this.tokens.matchesContextualAtIndex(e,V._from))e++;else{for(const{importedName:h,localName:d}of o)this.addExportBinding(h,d);return}if(!this.tokens.matches1AtIndex(e,n.string))throw new Error("Expected string token at the end of import statement.");const i=this.tokens.stringValueAtIndex(e);this.getImportInfo(i).namedExports.push(...o)}preprocessExportStarAtIndex(e){let t=null;if(this.tokens.matches3AtIndex(e,n._export,n.star,n._as)?(e+=3,t=this.tokens.identifierNameAtIndex(e),e+=2):e+=3,!this.tokens.matches1AtIndex(e,n.string))throw new Error("Expected string token at the end of star export statement.");const o=this.tokens.stringValueAtIndex(e),i=this.getImportInfo(o);t!==null?i.exportStarNames.push(t):i.hasStarExport=!0}getNamedImports(e){const t=[];for(;;){if(this.tokens.matches1AtIndex(e,n.braceR)){e++;break}const o=gt(this.tokens,e);if(e=o.endIndex,o.isType||t.push({importedName:o.leftName,localName:o.rightName}),this.tokens.matches2AtIndex(e,n.comma,n.braceR)){e+=2;break}else if(this.tokens.matches1AtIndex(e,n.braceR)){e++;break}else if(this.tokens.matches1AtIndex(e,n.comma))e++;else throw new Error(`Unexpected token: ${JSON.stringify(this.tokens.tokens[e])}`)}return{newIndex:e,namedImports:t}}getImportInfo(e){const t=this.importInfoByPath.get(e);if(t)return t;const o={defaultNames:[],wildcardNames:[],namedImports:[],namedExports:[],hasBareImport:!1,exportStarNames:[],hasStarExport:!1};return this.importInfoByPath.set(e,o),o}addExportBinding(e,t){this.exportBindingsByLocalName.has(e)||this.exportBindingsByLocalName.set(e,[]),this.exportBindingsByLocalName.get(e).push(t)}claimImportCode(e){const t=this.importsToReplace.get(e);return this.importsToReplace.set(e,""),t||""}getIdentifierReplacement(e){return this.identifierReplacements.get(e)||null}resolveExportBinding(e){const t=this.exportBindingsByLocalName.get(e);return!t||t.length===0?null:t.map(o=>`exports.${o}`).join(" = ")}getGlobalNames(){return new Set([...this.identifierReplacements.keys(),...this.exportBindingsByLocalName.keys()])}}var Ts=class{constructor(){this._indexes={__proto__:null},this.array=[]}};function Sr(s,e){return s._indexes[e]}function _r(s,e){const t=Sr(s,e);if(t!==void 0)return t;const{array:o,_indexes:i}=s,a=o.push(e);return i[e]=a-1}var Rr=0,Lr=1,$r=2,jr=3,Fr=4,ao=-1,Dr=class{constructor({file:s,sourceRoot:e}={}){this._names=new Ts,this._sources=new Ts,this._sourcesContent=[],this._mappings=[],this.file=s,this.sourceRoot=e,this._ignoreList=new Ts}};var ys=(s,e,t,o,i,a,h,d)=>Br(!0,s,e,t,o,i,a);function Pr(s){const{_mappings:e,_sources:t,_sourcesContent:o,_names:i,_ignoreList:a}=s;return qr(e),{version:3,file:s.file||void 0,names:i.array,sourceRoot:s.sourceRoot||void 0,sources:t.array,sourcesContent:o,mappings:e,ignoreList:a.array}}function Mr(s){const e=Pr(s);return Object.assign({},e,{mappings:pr(e.mappings)})}function Br(s,e,t,o,i,a,h,d,T){const{_mappings:m,_sources:f,_sourcesContent:k,_names:C}=e,I=Vr(m,t),w=Or(I,o);if(!i)return Hr(I,w)?void 0:Mn(I,w,[o]);const N=_r(f,i),j=ao;if(N===k.length&&(k[N]=null),!zr(I,w,N,a,h,j))return Mn(I,w,[o,N,a,h])}function Vr(s,e){for(let t=s.length;t<=e;t++)s[t]=[];return s[e]}function Or(s,e){let t=s.length;for(let o=t-1;o>=0;t=o--){const i=s[o];if(e>=i[Rr])break}return t}function Mn(s,e,t){for(let o=s.length;o>e;o--)s[o]=s[o-1];s[e]=t}function qr(s){const{length:e}=s;let t=e;for(let o=t-1;o>=0&&!(s[o].length>0);t=o,o--);t<e&&(s.length=t)}function Hr(s,e){return e===0?!0:s[e-1].length===1}function zr(s,e,t,o,i,a){if(e===0)return!1;const h=s[e-1];return h.length===1?!1:t===h[Lr]&&o===h[$r]&&i===h[jr]&&a===(h.length===5?h[Fr]:ao)}function Ur({code:s,mappings:e},t,o,i,a){const h=Wr(i,a),d=new Dr({file:o.compiledFilename});let T=0,m=e[0];for(;m===void 0&&T<e.length-1;)T++,m=e[T];let f=0,k=0;m!==k&&ys(d,f,0,t,f,0);for(let N=0;N<s.length;N++){if(N===m){const j=m-k,O=h[T];for(ys(d,f,j,t,f,O);(m===N||m===void 0)&&T<e.length-1;)T++,m=e[T]}s.charCodeAt(N)===pe.lineFeed&&(f++,k=N+1,m!==k&&ys(d,f,0,t,f,0))}const{sourceRoot:C,sourcesContent:I,...w}=Mr(d);return w}function Wr(s,e){const t=new Array(e.length);let o=0,i=e[o].start,a=0;for(let h=0;h<s.length;h++)h===i&&(t[o]=i-a,o++,i=e[o].start),s.charCodeAt(h)===pe.lineFeed&&(a=h+1);return t}const Gr={require:`
    import {createRequire as CREATE_REQUIRE_NAME} from "module";
    const require = CREATE_REQUIRE_NAME(import.meta.url);
  `,interopRequireWildcard:`
    function interopRequireWildcard(obj) {
      if (obj && obj.__esModule) {
        return obj;
      } else {
        var newObj = {};
        if (obj != null) {
          for (var key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key)) {
              newObj[key] = obj[key];
            }
          }
        }
        newObj.default = obj;
        return newObj;
      }
    }
  `,interopRequireDefault:`
    function interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { default: obj };
    }
  `,createNamedExportFrom:`
    function createNamedExportFrom(obj, localName, importedName) {
      Object.defineProperty(exports, localName, {enumerable: true, configurable: true, get: () => obj[importedName]});
    }
  `,createStarExport:`
    function createStarExport(obj) {
      Object.keys(obj)
        .filter((key) => key !== "default" && key !== "__esModule")
        .forEach((key) => {
          if (exports.hasOwnProperty(key)) {
            return;
          }
          Object.defineProperty(exports, key, {enumerable: true, configurable: true, get: () => obj[key]});
        });
    }
  `,nullishCoalesce:`
    function nullishCoalesce(lhs, rhsFn) {
      if (lhs != null) {
        return lhs;
      } else {
        return rhsFn();
      }
    }
  `,asyncNullishCoalesce:`
    async function asyncNullishCoalesce(lhs, rhsFn) {
      if (lhs != null) {
        return lhs;
      } else {
        return await rhsFn();
      }
    }
  `,optionalChain:`
    function optionalChain(ops) {
      let lastAccessLHS = undefined;
      let value = ops[0];
      let i = 1;
      while (i < ops.length) {
        const op = ops[i];
        const fn = ops[i + 1];
        i += 2;
        if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {
          return undefined;
        }
        if (op === 'access' || op === 'optionalAccess') {
          lastAccessLHS = value;
          value = fn(value);
        } else if (op === 'call' || op === 'optionalCall') {
          value = fn((...args) => value.call(lastAccessLHS, ...args));
          lastAccessLHS = undefined;
        }
      }
      return value;
    }
  `,asyncOptionalChain:`
    async function asyncOptionalChain(ops) {
      let lastAccessLHS = undefined;
      let value = ops[0];
      let i = 1;
      while (i < ops.length) {
        const op = ops[i];
        const fn = ops[i + 1];
        i += 2;
        if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {
          return undefined;
        }
        if (op === 'access' || op === 'optionalAccess') {
          lastAccessLHS = value;
          value = await fn(value);
        } else if (op === 'call' || op === 'optionalCall') {
          value = await fn((...args) => value.call(lastAccessLHS, ...args));
          lastAccessLHS = undefined;
        }
      }
      return value;
    }
  `,optionalChainDelete:`
    function optionalChainDelete(ops) {
      const result = OPTIONAL_CHAIN_NAME(ops);
      return result == null ? true : result;
    }
  `,asyncOptionalChainDelete:`
    async function asyncOptionalChainDelete(ops) {
      const result = await ASYNC_OPTIONAL_CHAIN_NAME(ops);
      return result == null ? true : result;
    }
  `};class Qt{__init(){this.helperNames={}}__init2(){this.createRequireName=null}constructor(e){this.nameManager=e,Qt.prototype.__init.call(this),Qt.prototype.__init2.call(this)}getHelperName(e){let t=this.helperNames[e];return t||(t=this.nameManager.claimFreeName(`_${e}`),this.helperNames[e]=t,t)}emitHelpers(){let e="";this.helperNames.optionalChainDelete&&this.getHelperName("optionalChain"),this.helperNames.asyncOptionalChainDelete&&this.getHelperName("asyncOptionalChain");for(const[t,o]of Object.entries(Gr)){const i=this.helperNames[t];let a=o;t==="optionalChainDelete"?a=a.replace("OPTIONAL_CHAIN_NAME",this.helperNames.optionalChain):t==="asyncOptionalChainDelete"?a=a.replace("ASYNC_OPTIONAL_CHAIN_NAME",this.helperNames.asyncOptionalChain):t==="require"&&(this.createRequireName===null&&(this.createRequireName=this.nameManager.claimFreeName("_createRequire")),a=a.replace(/CREATE_REQUIRE_NAME/g,this.createRequireName)),i&&(e+=" ",e+=a.replace(t,i).replace(/\s+/g," ").trim())}return e}}function Bn(s,e,t){Jr(s,t)&&Xr(s,e,t)}function Jr(s,e){for(const t of s.tokens)if(t.type===n.name&&!t.isType&&dr(t)&&e.has(s.identifierNameForToken(t)))return!0;return!1}function Xr(s,e,t){const o=[];let i=e.length-1;for(let a=s.tokens.length-1;;a--){for(;o.length>0&&o[o.length-1].startTokenIndex===a+1;)o.pop();for(;i>=0&&e[i].endTokenIndex===a+1;)o.push(e[i]),i--;if(a<0)break;const h=s.tokens[a],d=s.identifierNameForToken(h);if(o.length>1&&!h.isType&&h.type===n.name&&t.has(d)){if(mr(h))Vn(o[o.length-1],s,d);else if(fr(h)){let T=o.length-1;for(;T>0&&!o[T].isFunctionScope;)T--;if(T<0)throw new Error("Did not find parent function scope.");Vn(o[T],s,d)}}}if(o.length>0)throw new Error("Expected empty scope stack after processing file.")}function Vn(s,e,t){for(let o=s.startTokenIndex;o<s.endTokenIndex;o++){const i=e.tokens[o];(i.type===n.name||i.type===n.jsxName)&&e.identifierNameForToken(i)===t&&(i.shadowsGlobal=!0)}}function Kr(s,e){const t=[];for(const o of e)o.type===n.name&&t.push(s.slice(o.start,o.end));return t}class Ps{__init(){this.usedNames=new Set}constructor(e,t){Ps.prototype.__init.call(this),this.usedNames=new Set(Kr(e,t))}claimFreeName(e){const t=this.findFreeName(e);return this.usedNames.add(t),t}findFreeName(e){if(!this.usedNames.has(e))return e;let t=2;for(;this.usedNames.has(e+String(t));)t++;return e+String(t)}}function Yr(s){let e=s.currentIndex(),t=0;const o=s.currentToken();do{const i=s.tokens[e];if(i.isOptionalChainStart&&t++,i.isOptionalChainEnd&&t--,t+=i.numNullishCoalesceStarts,t-=i.numNullishCoalesceEnds,i.contextualKeyword===V._await&&i.identifierRole==null&&i.scopeDepth===o.scopeDepth)return!0;e+=1}while(t>0&&e<s.tokens.length);return!1}class kt{__init(){this.resultCode=""}__init2(){this.resultMappings=new Array(this.tokens.length)}__init3(){this.tokenIndex=0}constructor(e,t,o,i,a){this.code=e,this.tokens=t,this.isFlowEnabled=o,this.disableESTransforms=i,this.helperManager=a,kt.prototype.__init.call(this),kt.prototype.__init2.call(this),kt.prototype.__init3.call(this)}snapshot(){return{resultCode:this.resultCode,tokenIndex:this.tokenIndex}}restoreToSnapshot(e){this.resultCode=e.resultCode,this.tokenIndex=e.tokenIndex}dangerouslyGetAndRemoveCodeSinceSnapshot(e){const t=this.resultCode.slice(e.resultCode.length);return this.resultCode=e.resultCode,t}reset(){this.resultCode="",this.resultMappings=new Array(this.tokens.length),this.tokenIndex=0}matchesContextualAtIndex(e,t){return this.matches1AtIndex(e,n.name)&&this.tokens[e].contextualKeyword===t}identifierNameAtIndex(e){return this.identifierNameForToken(this.tokens[e])}identifierNameAtRelativeIndex(e){return this.identifierNameForToken(this.tokenAtRelativeIndex(e))}identifierName(){return this.identifierNameForToken(this.currentToken())}identifierNameForToken(e){return this.code.slice(e.start,e.end)}rawCodeForToken(e){return this.code.slice(e.start,e.end)}stringValueAtIndex(e){return this.stringValueForToken(this.tokens[e])}stringValue(){return this.stringValueForToken(this.currentToken())}stringValueForToken(e){return this.code.slice(e.start+1,e.end-1)}matches1AtIndex(e,t){return this.tokens[e].type===t}matches2AtIndex(e,t,o){return this.tokens[e].type===t&&this.tokens[e+1].type===o}matches3AtIndex(e,t,o,i){return this.tokens[e].type===t&&this.tokens[e+1].type===o&&this.tokens[e+2].type===i}matches1(e){return this.tokens[this.tokenIndex].type===e}matches2(e,t){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t}matches3(e,t,o){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t&&this.tokens[this.tokenIndex+2].type===o}matches4(e,t,o,i){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t&&this.tokens[this.tokenIndex+2].type===o&&this.tokens[this.tokenIndex+3].type===i}matches5(e,t,o,i,a){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t&&this.tokens[this.tokenIndex+2].type===o&&this.tokens[this.tokenIndex+3].type===i&&this.tokens[this.tokenIndex+4].type===a}matchesContextual(e){return this.matchesContextualAtIndex(this.tokenIndex,e)}matchesContextIdAndLabel(e,t){return this.matches1(e)&&this.currentToken().contextId===t}previousWhitespaceAndComments(){let e=this.code.slice(this.tokenIndex>0?this.tokens[this.tokenIndex-1].end:0,this.tokenIndex<this.tokens.length?this.tokens[this.tokenIndex].start:this.code.length);return this.isFlowEnabled&&(e=e.replace(/@flow/g,"")),e}replaceToken(e){this.resultCode+=this.previousWhitespaceAndComments(),this.appendTokenPrefix(),this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=e,this.appendTokenSuffix(),this.tokenIndex++}replaceTokenTrimmingLeftWhitespace(e){this.resultCode+=this.previousWhitespaceAndComments().replace(/[^\r\n]/g,""),this.appendTokenPrefix(),this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=e,this.appendTokenSuffix(),this.tokenIndex++}removeInitialToken(){this.replaceToken("")}removeToken(){this.replaceTokenTrimmingLeftWhitespace("")}removeBalancedCode(){let e=0;for(;!this.isAtEnd();){if(this.matches1(n.braceL))e++;else if(this.matches1(n.braceR)){if(e===0)return;e--}this.removeToken()}}copyExpectedToken(e){if(this.tokens[this.tokenIndex].type!==e)throw new Error(`Expected token ${e}`);this.copyToken()}copyToken(){this.resultCode+=this.previousWhitespaceAndComments(),this.appendTokenPrefix(),this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=this.code.slice(this.tokens[this.tokenIndex].start,this.tokens[this.tokenIndex].end),this.appendTokenSuffix(),this.tokenIndex++}copyTokenWithPrefix(e){this.resultCode+=this.previousWhitespaceAndComments(),this.appendTokenPrefix(),this.resultCode+=e,this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=this.code.slice(this.tokens[this.tokenIndex].start,this.tokens[this.tokenIndex].end),this.appendTokenSuffix(),this.tokenIndex++}appendTokenPrefix(){const e=this.currentToken();if((e.numNullishCoalesceStarts||e.isOptionalChainStart)&&(e.isAsyncOperation=Yr(this)),!this.disableESTransforms){if(e.numNullishCoalesceStarts)for(let t=0;t<e.numNullishCoalesceStarts;t++)e.isAsyncOperation?(this.resultCode+="await ",this.resultCode+=this.helperManager.getHelperName("asyncNullishCoalesce")):this.resultCode+=this.helperManager.getHelperName("nullishCoalesce"),this.resultCode+="(";e.isOptionalChainStart&&(e.isAsyncOperation&&(this.resultCode+="await "),this.tokenIndex>0&&this.tokenAtRelativeIndex(-1).type===n._delete?e.isAsyncOperation?this.resultCode+=this.helperManager.getHelperName("asyncOptionalChainDelete"):this.resultCode+=this.helperManager.getHelperName("optionalChainDelete"):e.isAsyncOperation?this.resultCode+=this.helperManager.getHelperName("asyncOptionalChain"):this.resultCode+=this.helperManager.getHelperName("optionalChain"),this.resultCode+="([")}}appendTokenSuffix(){const e=this.currentToken();if(e.isOptionalChainEnd&&!this.disableESTransforms&&(this.resultCode+="])"),e.numNullishCoalesceEnds&&!this.disableESTransforms)for(let t=0;t<e.numNullishCoalesceEnds;t++)this.resultCode+="))"}appendCode(e){this.resultCode+=e}currentToken(){return this.tokens[this.tokenIndex]}currentTokenCode(){const e=this.currentToken();return this.code.slice(e.start,e.end)}tokenAtRelativeIndex(e){return this.tokens[this.tokenIndex+e]}currentIndex(){return this.tokenIndex}nextToken(){if(this.tokenIndex===this.tokens.length)throw new Error("Unexpectedly reached end of input.");this.tokenIndex++}previousToken(){this.tokenIndex--}finish(){if(this.tokenIndex!==this.tokens.length)throw new Error("Tried to finish processing tokens before reaching the end.");return this.resultCode+=this.previousWhitespaceAndComments(),{code:this.resultCode,mappings:this.resultMappings}}isAtEnd(){return this.tokenIndex===this.tokens.length}}function Qr(s,e,t,o){const i=e.snapshot(),a=Zr(e);let h=[];const d=[],T=[];let m=null;const f=[],k=[],C=e.currentToken().contextId;if(C==null)throw new Error("Expected non-null class context ID on class open-brace.");for(e.nextToken();!e.matchesContextIdAndLabel(n.braceR,C);)if(e.matchesContextual(V._constructor)&&!e.currentToken().isType)({constructorInitializerStatements:h,constructorInsertPos:m}=On(e));else if(e.matches1(n.semi))o||k.push({start:e.currentIndex(),end:e.currentIndex()+1}),e.nextToken();else if(e.currentToken().isType)e.nextToken();else{const I=e.currentIndex();let w=!1,N=!1,j=!1;for(;Zt(e.currentToken());)e.matches1(n._static)&&(w=!0),e.matches1(n.hash)&&(N=!0),(e.matches1(n._declare)||e.matches1(n._abstract))&&(j=!0),e.nextToken();if(w&&e.matches1(n.braceL)){Is(e,C);continue}if(N){Is(e,C);continue}if(e.matchesContextual(V._constructor)&&!e.currentToken().isType){({constructorInitializerStatements:h,constructorInsertPos:m}=On(e));continue}const O=e.currentIndex();if(ei(e),e.matches1(n.lessThan)||e.matches1(n.parenL)){Is(e,C);continue}for(;e.currentToken().isType;)e.nextToken();if(e.matches1(n.eq)){const oe=e.currentIndex(),te=e.currentToken().rhsEndIndex;if(te==null)throw new Error("Expected rhsEndIndex on class field assignment.");for(e.nextToken();e.currentIndex()<te;)s.processToken();let Y;w?(Y=t.claimFreeName("__initStatic"),T.push(Y)):(Y=t.claimFreeName("__init"),d.push(Y)),f.push({initializerName:Y,equalsIndex:oe,start:O,end:e.currentIndex()})}else(!o||j)&&k.push({start:I,end:e.currentIndex()})}return e.restoreToSnapshot(i),o?{headerInfo:a,constructorInitializerStatements:h,instanceInitializerNames:[],staticInitializerNames:[],constructorInsertPos:m,fields:[],rangesToRemove:k}:{headerInfo:a,constructorInitializerStatements:h,instanceInitializerNames:d,staticInitializerNames:T,constructorInsertPos:m,fields:f,rangesToRemove:k}}function Is(s,e){for(s.nextToken();s.currentToken().contextId!==e;)s.nextToken();for(;Zt(s.tokenAtRelativeIndex(-1));)s.previousToken()}function Zr(s){const e=s.currentToken(),t=e.contextId;if(t==null)throw new Error("Expected context ID on class token.");const o=e.isExpression;if(o==null)throw new Error("Expected isExpression on class token.");let i=null,a=!1;for(s.nextToken(),s.matches1(n.name)&&(i=s.identifierName());!s.matchesContextIdAndLabel(n.braceL,t);)s.matches1(n._extends)&&!s.currentToken().isType&&(a=!0),s.nextToken();return{isExpression:o,className:i,hasSuperclass:a}}function On(s){const e=[];s.nextToken();const t=s.currentToken().contextId;if(t==null)throw new Error("Expected context ID on open-paren starting constructor params.");for(;!s.matchesContextIdAndLabel(n.parenR,t);)if(s.currentToken().contextId===t){if(s.nextToken(),Zt(s.currentToken())){for(s.nextToken();Zt(s.currentToken());)s.nextToken();const a=s.currentToken();if(a.type!==n.name)throw new Error("Expected identifier after access modifiers in constructor arg.");const h=s.identifierNameForToken(a);e.push(`this.${h} = ${h}`)}}else s.nextToken();for(s.nextToken();s.currentToken().isType;)s.nextToken();let o=s.currentIndex(),i=!1;for(;!s.matchesContextIdAndLabel(n.braceR,t);){if(!i&&s.matches2(n._super,n.parenL)){s.nextToken();const a=s.currentToken().contextId;if(a==null)throw new Error("Expected a context ID on the super call");for(;!s.matchesContextIdAndLabel(n.parenR,a);)s.nextToken();o=s.currentIndex(),i=!0}s.nextToken()}return s.nextToken(),{constructorInitializerStatements:e,constructorInsertPos:o}}function Zt(s){return[n._async,n._get,n._set,n.plus,n.minus,n._readonly,n._static,n._public,n._private,n._protected,n._override,n._abstract,n.star,n._declare,n.hash].includes(s.type)}function ei(s){if(s.matches1(n.bracketL)){const t=s.currentToken().contextId;if(t==null)throw new Error("Expected class context ID on computed name open bracket.");for(;!s.matchesContextIdAndLabel(n.bracketR,t);)s.nextToken();s.nextToken()}else s.nextToken()}function co(s){if(s.removeInitialToken(),s.removeToken(),s.removeToken(),s.removeToken(),s.matches1(n.parenL))s.removeToken(),s.removeToken(),s.removeToken();else for(;s.matches1(n.dot);)s.removeToken(),s.removeToken()}const lo={typeDeclarations:new Set,valueDeclarations:new Set};function ho(s){const e=new Set,t=new Set;for(let o=0;o<s.tokens.length;o++){const i=s.tokens[o];i.type===n.name&&so(i)&&(i.isType?e.add(s.identifierNameForToken(i)):t.add(s.identifierNameForToken(i)))}return{typeDeclarations:e,valueDeclarations:t}}function uo(s){let e=s.currentIndex();for(;!s.matches1AtIndex(e,n.braceR);)e++;return s.matchesContextualAtIndex(e+1,V._from)&&s.matches1AtIndex(e+2,n.string)}function Xe(s){(s.matches2(n._with,n.braceL)||s.matches2(n.name,n.braceL)&&s.matchesContextual(V._assert))&&(s.removeToken(),s.removeToken(),s.removeBalancedCode(),s.removeToken())}function po(s,e,t,o){if(!s||e)return!1;const i=t.currentToken();if(i.rhsEndIndex==null)throw new Error("Expected non-null rhsEndIndex on export token.");const a=i.rhsEndIndex-t.currentIndex();if(a!==3&&!(a===4&&t.matches1AtIndex(i.rhsEndIndex-1,n.semi)))return!1;const h=t.tokenAtRelativeIndex(2);if(h.type!==n.name)return!1;const d=t.identifierNameForToken(h);return o.typeDeclarations.has(d)&&!o.valueDeclarations.has(d)}class xt extends fe{__init(){this.hadExport=!1}__init2(){this.hadNamedExport=!1}__init3(){this.hadDefaultExport=!1}constructor(e,t,o,i,a,h,d,T,m,f,k,C){super(),this.rootTransformer=e,this.tokens=t,this.importProcessor=o,this.nameManager=i,this.helperManager=a,this.reactHotLoaderTransformer=h,this.enableLegacyBabel5ModuleInterop=d,this.enableLegacyTypeScriptModuleInterop=T,this.isTypeScriptTransformEnabled=m,this.isFlowTransformEnabled=f,this.preserveDynamicImport=k,this.keepUnusedImports=C,xt.prototype.__init.call(this),xt.prototype.__init2.call(this),xt.prototype.__init3.call(this),this.declarationInfo=m?ho(t):lo}getPrefixCode(){let e="";return this.hadExport&&(e+='Object.defineProperty(exports, "__esModule", {value: true});'),e}getSuffixCode(){return this.enableLegacyBabel5ModuleInterop&&this.hadDefaultExport&&!this.hadNamedExport?`
module.exports = exports.default;
`:""}process(){return this.tokens.matches3(n._import,n.name,n.eq)?this.processImportEquals():this.tokens.matches1(n._import)?(this.processImport(),!0):this.tokens.matches2(n._export,n.eq)?(this.tokens.replaceToken("module.exports"),!0):this.tokens.matches1(n._export)&&!this.tokens.currentToken().isType?(this.hadExport=!0,this.processExport()):this.tokens.matches2(n.name,n.postIncDec)&&this.processPostIncDec()?!0:this.tokens.matches1(n.name)||this.tokens.matches1(n.jsxName)?this.processIdentifier():this.tokens.matches1(n.eq)?this.processAssignment():this.tokens.matches1(n.assign)?this.processComplexAssignment():this.tokens.matches1(n.preIncDec)?this.processPreIncDec():!1}processImportEquals(){const e=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);return this.importProcessor.shouldAutomaticallyElideImportedName(e)?co(this.tokens):this.tokens.replaceToken("const"),!0}processImport(){if(this.tokens.matches2(n._import,n.parenL)){if(this.preserveDynamicImport){this.tokens.copyToken();return}const t=this.enableLegacyTypeScriptModuleInterop?"":`${this.helperManager.getHelperName("interopRequireWildcard")}(`;this.tokens.replaceToken(`Promise.resolve().then(() => ${t}require`);const o=this.tokens.currentToken().contextId;if(o==null)throw new Error("Expected context ID on dynamic import invocation.");for(this.tokens.copyToken();!this.tokens.matchesContextIdAndLabel(n.parenR,o);)this.rootTransformer.processToken();this.tokens.replaceToken(t?")))":"))");return}if(this.removeImportAndDetectIfShouldElide())this.tokens.removeToken();else{const t=this.tokens.stringValue();this.tokens.replaceTokenTrimmingLeftWhitespace(this.importProcessor.claimImportCode(t)),this.tokens.appendCode(this.importProcessor.claimImportCode(t))}Xe(this.tokens),this.tokens.matches1(n.semi)&&this.tokens.removeToken()}removeImportAndDetectIfShouldElide(){if(this.tokens.removeInitialToken(),this.tokens.matchesContextual(V._type)&&!this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,n.comma)&&!this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,V._from))return this.removeRemainingImport(),!0;if(this.tokens.matches1(n.name)||this.tokens.matches1(n.star))return this.removeRemainingImport(),!1;if(this.tokens.matches1(n.string))return!1;let e=!1,t=!1;for(;!this.tokens.matches1(n.string);)(!e&&this.tokens.matches1(n.braceL)||this.tokens.matches1(n.comma))&&(this.tokens.removeToken(),this.tokens.matches1(n.braceR)||(t=!0),(this.tokens.matches2(n.name,n.comma)||this.tokens.matches2(n.name,n.braceR)||this.tokens.matches4(n.name,n.name,n.name,n.comma)||this.tokens.matches4(n.name,n.name,n.name,n.braceR))&&(e=!0)),this.tokens.removeToken();return this.keepUnusedImports?!1:this.isTypeScriptTransformEnabled?!e:this.isFlowTransformEnabled?t&&!e:!1}removeRemainingImport(){for(;!this.tokens.matches1(n.string);)this.tokens.removeToken()}processIdentifier(){const e=this.tokens.currentToken();if(e.shadowsGlobal)return!1;if(e.identifierRole===Se.ObjectShorthand)return this.processObjectShorthand();if(e.identifierRole!==Se.Access)return!1;const t=this.importProcessor.getIdentifierReplacement(this.tokens.identifierNameForToken(e));if(!t)return!1;let o=this.tokens.currentIndex()+1;for(;o<this.tokens.tokens.length&&this.tokens.tokens[o].type===n.parenR;)o++;return this.tokens.tokens[o].type===n.parenL?this.tokens.tokenAtRelativeIndex(1).type===n.parenL&&this.tokens.tokenAtRelativeIndex(-1).type!==n._new?(this.tokens.replaceToken(`${t}.call(void 0, `),this.tokens.removeToken(),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.parenR)):this.tokens.replaceToken(`(0, ${t})`):this.tokens.replaceToken(t),!0}processObjectShorthand(){const e=this.tokens.identifierName(),t=this.importProcessor.getIdentifierReplacement(e);return t?(this.tokens.replaceToken(`${e}: ${t}`),!0):!1}processExport(){if(this.tokens.matches2(n._export,n._enum)||this.tokens.matches3(n._export,n._const,n._enum))return this.hadNamedExport=!0,!1;if(this.tokens.matches2(n._export,n._default))return this.tokens.matches3(n._export,n._default,n._enum)?(this.hadDefaultExport=!0,!1):(this.processExportDefault(),!0);if(this.tokens.matches2(n._export,n.braceL))return this.processExportBindings(),!0;if(this.tokens.matches2(n._export,n.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,V._type)){if(this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.matches1(n.braceL)){for(;!this.tokens.matches1(n.braceR);)this.tokens.removeToken();this.tokens.removeToken()}else this.tokens.removeToken(),this.tokens.matches1(n._as)&&(this.tokens.removeToken(),this.tokens.removeToken());return this.tokens.matchesContextual(V._from)&&this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,n.string)&&(this.tokens.removeToken(),this.tokens.removeToken(),Xe(this.tokens)),!0}if(this.hadNamedExport=!0,this.tokens.matches2(n._export,n._var)||this.tokens.matches2(n._export,n._let)||this.tokens.matches2(n._export,n._const))return this.processExportVar(),!0;if(this.tokens.matches2(n._export,n._function)||this.tokens.matches3(n._export,n.name,n._function))return this.processExportFunction(),!0;if(this.tokens.matches2(n._export,n._class)||this.tokens.matches3(n._export,n._abstract,n._class)||this.tokens.matches2(n._export,n.at))return this.processExportClass(),!0;if(this.tokens.matches2(n._export,n.star))return this.processExportStar(),!0;throw new Error("Unrecognized export syntax.")}processAssignment(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e-1];if(t.isType||t.type!==n.name||t.shadowsGlobal||e>=2&&this.tokens.matches1AtIndex(e-2,n.dot)||e>=2&&[n._var,n._let,n._const].includes(this.tokens.tokens[e-2].type))return!1;const o=this.importProcessor.resolveExportBinding(this.tokens.identifierNameForToken(t));return o?(this.tokens.copyToken(),this.tokens.appendCode(` ${o} =`),!0):!1}processComplexAssignment(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e-1];if(t.type!==n.name||t.shadowsGlobal||e>=2&&this.tokens.matches1AtIndex(e-2,n.dot))return!1;const o=this.importProcessor.resolveExportBinding(this.tokens.identifierNameForToken(t));return o?(this.tokens.appendCode(` = ${o}`),this.tokens.copyToken(),!0):!1}processPreIncDec(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e+1];if(t.type!==n.name||t.shadowsGlobal||e+2<this.tokens.tokens.length&&(this.tokens.matches1AtIndex(e+2,n.dot)||this.tokens.matches1AtIndex(e+2,n.bracketL)||this.tokens.matches1AtIndex(e+2,n.parenL)))return!1;const o=this.tokens.identifierNameForToken(t),i=this.importProcessor.resolveExportBinding(o);return i?(this.tokens.appendCode(`${i} = `),this.tokens.copyToken(),!0):!1}processPostIncDec(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e],o=this.tokens.tokens[e+1];if(t.type!==n.name||t.shadowsGlobal||e>=1&&this.tokens.matches1AtIndex(e-1,n.dot))return!1;const i=this.tokens.identifierNameForToken(t),a=this.importProcessor.resolveExportBinding(i);if(!a)return!1;const h=this.tokens.rawCodeForToken(o),d=this.importProcessor.getIdentifierReplacement(i)||i;if(h==="++")this.tokens.replaceToken(`(${d} = ${a} = ${d} + 1, ${d} - 1)`);else if(h==="--")this.tokens.replaceToken(`(${d} = ${a} = ${d} - 1, ${d} + 1)`);else throw new Error(`Unexpected operator: ${h}`);return this.tokens.removeToken(),!0}processExportDefault(){let e=!0;if(this.tokens.matches4(n._export,n._default,n._function,n.name)||this.tokens.matches5(n._export,n._default,n.name,n._function,n.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,V._async)){this.tokens.removeInitialToken(),this.tokens.removeToken();const t=this.processNamedFunction();this.tokens.appendCode(` exports.default = ${t};`)}else if(this.tokens.matches4(n._export,n._default,n._class,n.name)||this.tokens.matches5(n._export,n._default,n._abstract,n._class,n.name)||this.tokens.matches3(n._export,n._default,n.at)){this.tokens.removeInitialToken(),this.tokens.removeToken(),this.copyDecorators(),this.tokens.matches1(n._abstract)&&this.tokens.removeToken();const t=this.rootTransformer.processNamedClass();this.tokens.appendCode(` exports.default = ${t};`)}else if(po(this.isTypeScriptTransformEnabled,this.keepUnusedImports,this.tokens,this.declarationInfo))e=!1,this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.removeToken();else if(this.reactHotLoaderTransformer){const t=this.nameManager.claimFreeName("_default");this.tokens.replaceToken(`let ${t}; exports.`),this.tokens.copyToken(),this.tokens.appendCode(` = ${t} =`),this.reactHotLoaderTransformer.setExtractedDefaultExportName(t)}else this.tokens.replaceToken("exports."),this.tokens.copyToken(),this.tokens.appendCode(" =");e&&(this.hadDefaultExport=!0)}copyDecorators(){for(;this.tokens.matches1(n.at);)if(this.tokens.copyToken(),this.tokens.matches1(n.parenL))this.tokens.copyExpectedToken(n.parenL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.parenR);else{for(this.tokens.copyExpectedToken(n.name);this.tokens.matches1(n.dot);)this.tokens.copyExpectedToken(n.dot),this.tokens.copyExpectedToken(n.name);this.tokens.matches1(n.parenL)&&(this.tokens.copyExpectedToken(n.parenL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.parenR))}}processExportVar(){this.isSimpleExportVar()?this.processSimpleExportVar():this.processComplexExportVar()}isSimpleExportVar(){let e=this.tokens.currentIndex();if(e++,e++,!this.tokens.matches1AtIndex(e,n.name))return!1;for(e++;e<this.tokens.tokens.length&&this.tokens.tokens[e].isType;)e++;return!!this.tokens.matches1AtIndex(e,n.eq)}processSimpleExportVar(){this.tokens.removeInitialToken(),this.tokens.copyToken();const e=this.tokens.identifierName();for(;!this.tokens.matches1(n.eq);)this.rootTransformer.processToken();const t=this.tokens.currentToken().rhsEndIndex;if(t==null)throw new Error("Expected = token with an end index.");for(;this.tokens.currentIndex()<t;)this.rootTransformer.processToken();this.tokens.appendCode(`; exports.${e} = ${e}`)}processComplexExportVar(){this.tokens.removeInitialToken(),this.tokens.removeToken();const e=this.tokens.matches1(n.braceL);e&&this.tokens.appendCode("(");let t=0;for(;;)if(this.tokens.matches1(n.braceL)||this.tokens.matches1(n.dollarBraceL)||this.tokens.matches1(n.bracketL))t++,this.tokens.copyToken();else if(this.tokens.matches1(n.braceR)||this.tokens.matches1(n.bracketR))t--,this.tokens.copyToken();else{if(t===0&&!this.tokens.matches1(n.name)&&!this.tokens.currentToken().isType)break;if(this.tokens.matches1(n.eq)){const o=this.tokens.currentToken().rhsEndIndex;if(o==null)throw new Error("Expected = token with an end index.");for(;this.tokens.currentIndex()<o;)this.rootTransformer.processToken()}else{const o=this.tokens.currentToken();if(to(o)){const i=this.tokens.identifierName();let a=this.importProcessor.getIdentifierReplacement(i);if(a===null)throw new Error(`Expected a replacement for ${i} in \`export var\` syntax.`);kr(o)&&(a=`${i}: ${a}`),this.tokens.replaceToken(a)}else this.rootTransformer.processToken()}}if(e){const o=this.tokens.currentToken().rhsEndIndex;if(o==null)throw new Error("Expected = token with an end index.");for(;this.tokens.currentIndex()<o;)this.rootTransformer.processToken();this.tokens.appendCode(")")}}processExportFunction(){this.tokens.replaceToken("");const e=this.processNamedFunction();this.tokens.appendCode(` exports.${e} = ${e};`)}processNamedFunction(){if(this.tokens.matches1(n._function))this.tokens.copyToken();else if(this.tokens.matches2(n.name,n._function)){if(!this.tokens.matchesContextual(V._async))throw new Error("Expected async keyword in function export.");this.tokens.copyToken(),this.tokens.copyToken()}if(this.tokens.matches1(n.star)&&this.tokens.copyToken(),!this.tokens.matches1(n.name))throw new Error("Expected identifier for exported function name.");const e=this.tokens.identifierName();if(this.tokens.copyToken(),this.tokens.currentToken().isType)for(this.tokens.removeInitialToken();this.tokens.currentToken().isType;)this.tokens.removeToken();return this.tokens.copyExpectedToken(n.parenL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.parenR),this.rootTransformer.processPossibleTypeRange(),this.tokens.copyExpectedToken(n.braceL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.braceR),e}processExportClass(){this.tokens.removeInitialToken(),this.copyDecorators(),this.tokens.matches1(n._abstract)&&this.tokens.removeToken();const e=this.rootTransformer.processNamedClass();this.tokens.appendCode(` exports.${e} = ${e};`)}processExportBindings(){this.tokens.removeInitialToken(),this.tokens.removeToken();const e=uo(this.tokens),t=[];for(;;){if(this.tokens.matches1(n.braceR)){this.tokens.removeToken();break}const o=gt(this.tokens);for(;this.tokens.currentIndex()<o.endIndex;)this.tokens.removeToken();if(!(o.isType||!e&&this.shouldElideExportedIdentifier(o.leftName))){const a=o.rightName;a==="default"?this.hadDefaultExport=!0:this.hadNamedExport=!0;const h=o.leftName,d=this.importProcessor.getIdentifierReplacement(h);t.push(`exports.${a} = ${d||h};`)}if(this.tokens.matches1(n.braceR)){this.tokens.removeToken();break}if(this.tokens.matches2(n.comma,n.braceR)){this.tokens.removeToken(),this.tokens.removeToken();break}else if(this.tokens.matches1(n.comma))this.tokens.removeToken();else throw new Error(`Unexpected token: ${JSON.stringify(this.tokens.currentToken())}`)}if(this.tokens.matchesContextual(V._from)){this.tokens.removeToken();const o=this.tokens.stringValue();this.tokens.replaceTokenTrimmingLeftWhitespace(this.importProcessor.claimImportCode(o)),Xe(this.tokens)}else this.tokens.appendCode(t.join(" "));this.tokens.matches1(n.semi)&&this.tokens.removeToken()}processExportStar(){for(this.tokens.removeInitialToken();!this.tokens.matches1(n.string);)this.tokens.removeToken();const e=this.tokens.stringValue();this.tokens.replaceTokenTrimmingLeftWhitespace(this.importProcessor.claimImportCode(e)),Xe(this.tokens),this.tokens.matches1(n.semi)&&this.tokens.removeToken()}shouldElideExportedIdentifier(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&!this.declarationInfo.valueDeclarations.has(e)}}class ti extends fe{constructor(e,t,o,i,a,h,d,T){super(),this.tokens=e,this.nameManager=t,this.helperManager=o,this.reactHotLoaderTransformer=i,this.isTypeScriptTransformEnabled=a,this.isFlowTransformEnabled=h,this.keepUnusedImports=d,this.nonTypeIdentifiers=a&&!d?io(e,T):new Set,this.declarationInfo=a&&!d?ho(e):lo,this.injectCreateRequireForImportRequire=!!T.injectCreateRequireForImportRequire}process(){if(this.tokens.matches3(n._import,n.name,n.eq))return this.processImportEquals();if(this.tokens.matches4(n._import,n.name,n.name,n.eq)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,V._type)){this.tokens.removeInitialToken();for(let e=0;e<7;e++)this.tokens.removeToken();return!0}if(this.tokens.matches2(n._export,n.eq))return this.tokens.replaceToken("module.exports"),!0;if(this.tokens.matches5(n._export,n._import,n.name,n.name,n.eq)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,V._type)){this.tokens.removeInitialToken();for(let e=0;e<8;e++)this.tokens.removeToken();return!0}if(this.tokens.matches1(n._import))return this.processImport();if(this.tokens.matches2(n._export,n._default))return this.processExportDefault();if(this.tokens.matches2(n._export,n.braceL))return this.processNamedExports();if(this.tokens.matches2(n._export,n.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,V._type)){if(this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.matches1(n.braceL)){for(;!this.tokens.matches1(n.braceR);)this.tokens.removeToken();this.tokens.removeToken()}else this.tokens.removeToken(),this.tokens.matches1(n._as)&&(this.tokens.removeToken(),this.tokens.removeToken());return this.tokens.matchesContextual(V._from)&&this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,n.string)&&(this.tokens.removeToken(),this.tokens.removeToken(),Xe(this.tokens)),!0}return!1}processImportEquals(){const e=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);return this.shouldAutomaticallyElideImportedName(e)?co(this.tokens):this.injectCreateRequireForImportRequire?(this.tokens.replaceToken("const"),this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.replaceToken(this.helperManager.getHelperName("require"))):this.tokens.replaceToken("const"),!0}processImport(){if(this.tokens.matches2(n._import,n.parenL))return!1;const e=this.tokens.snapshot();if(this.removeImportTypeBindings()){for(this.tokens.restoreToSnapshot(e);!this.tokens.matches1(n.string);)this.tokens.removeToken();this.tokens.removeToken(),Xe(this.tokens),this.tokens.matches1(n.semi)&&this.tokens.removeToken()}return!0}removeImportTypeBindings(){if(this.tokens.copyExpectedToken(n._import),this.tokens.matchesContextual(V._type)&&!this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,n.comma)&&!this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,V._from))return!0;if(this.tokens.matches1(n.string))return this.tokens.copyToken(),!1;this.tokens.matchesContextual(V._module)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,V._from)&&this.tokens.copyToken();let e=!1,t=!1,o=!1;if(this.tokens.matches1(n.name)&&(this.shouldAutomaticallyElideImportedName(this.tokens.identifierName())?(this.tokens.removeToken(),this.tokens.matches1(n.comma)&&this.tokens.removeToken()):(e=!0,this.tokens.copyToken(),this.tokens.matches1(n.comma)&&(o=!0,this.tokens.removeToken()))),this.tokens.matches1(n.star))this.shouldAutomaticallyElideImportedName(this.tokens.identifierNameAtRelativeIndex(2))?(this.tokens.removeToken(),this.tokens.removeToken(),this.tokens.removeToken()):(o&&this.tokens.appendCode(","),e=!0,this.tokens.copyExpectedToken(n.star),this.tokens.copyExpectedToken(n.name),this.tokens.copyExpectedToken(n.name));else if(this.tokens.matches1(n.braceL)){for(o&&this.tokens.appendCode(","),this.tokens.copyToken();!this.tokens.matches1(n.braceR);){t=!0;const i=gt(this.tokens);if(i.isType||this.shouldAutomaticallyElideImportedName(i.rightName)){for(;this.tokens.currentIndex()<i.endIndex;)this.tokens.removeToken();this.tokens.matches1(n.comma)&&this.tokens.removeToken()}else{for(e=!0;this.tokens.currentIndex()<i.endIndex;)this.tokens.copyToken();this.tokens.matches1(n.comma)&&this.tokens.copyToken()}}this.tokens.copyExpectedToken(n.braceR)}return this.keepUnusedImports?!1:this.isTypeScriptTransformEnabled?!e:this.isFlowTransformEnabled?t&&!e:!1}shouldAutomaticallyElideImportedName(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&!this.nonTypeIdentifiers.has(e)}processExportDefault(){if(po(this.isTypeScriptTransformEnabled,this.keepUnusedImports,this.tokens,this.declarationInfo))return this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.removeToken(),!0;if(!(this.tokens.matches4(n._export,n._default,n._function,n.name)||this.tokens.matches5(n._export,n._default,n.name,n._function,n.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,V._async)||this.tokens.matches4(n._export,n._default,n._class,n.name)||this.tokens.matches5(n._export,n._default,n._abstract,n._class,n.name))&&this.reactHotLoaderTransformer){const t=this.nameManager.claimFreeName("_default");return this.tokens.replaceToken(`let ${t}; export`),this.tokens.copyToken(),this.tokens.appendCode(` ${t} =`),this.reactHotLoaderTransformer.setExtractedDefaultExportName(t),!0}return!1}processNamedExports(){if(!this.isTypeScriptTransformEnabled)return!1;this.tokens.copyExpectedToken(n._export),this.tokens.copyExpectedToken(n.braceL);const e=uo(this.tokens);let t=!1;for(;!this.tokens.matches1(n.braceR);){const o=gt(this.tokens);if(o.isType||!e&&this.shouldElideExportedName(o.leftName)){for(;this.tokens.currentIndex()<o.endIndex;)this.tokens.removeToken();this.tokens.matches1(n.comma)&&this.tokens.removeToken()}else{for(t=!0;this.tokens.currentIndex()<o.endIndex;)this.tokens.copyToken();this.tokens.matches1(n.comma)&&this.tokens.copyToken()}}return this.tokens.copyExpectedToken(n.braceR),!this.keepUnusedImports&&e&&!t&&(this.tokens.removeToken(),this.tokens.removeToken(),Xe(this.tokens)),!0}shouldElideExportedName(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&this.declarationInfo.typeDeclarations.has(e)&&!this.declarationInfo.valueDeclarations.has(e)}}class si extends fe{constructor(e,t,o){super(),this.rootTransformer=e,this.tokens=t,this.isImportsTransformEnabled=o}process(){return this.rootTransformer.processPossibleArrowParamEnd()||this.rootTransformer.processPossibleAsyncArrowWithTypeParams()||this.rootTransformer.processPossibleTypeRange()?!0:this.tokens.matches1(n._enum)?(this.processEnum(),!0):this.tokens.matches2(n._export,n._enum)?(this.processNamedExportEnum(),!0):this.tokens.matches3(n._export,n._default,n._enum)?(this.processDefaultExportEnum(),!0):!1}processNamedExportEnum(){if(this.isImportsTransformEnabled){this.tokens.removeInitialToken();const e=this.tokens.identifierNameAtRelativeIndex(1);this.processEnum(),this.tokens.appendCode(` exports.${e} = ${e};`)}else this.tokens.copyToken(),this.processEnum()}processDefaultExportEnum(){this.tokens.removeInitialToken(),this.tokens.removeToken();const e=this.tokens.identifierNameAtRelativeIndex(1);this.processEnum(),this.isImportsTransformEnabled?this.tokens.appendCode(` exports.default = ${e};`):this.tokens.appendCode(` export default ${e};`)}processEnum(){this.tokens.replaceToken("const"),this.tokens.copyExpectedToken(n.name);let e=!1;this.tokens.matchesContextual(V._of)&&(this.tokens.removeToken(),e=this.tokens.matchesContextual(V._symbol),this.tokens.removeToken());const t=this.tokens.matches3(n.braceL,n.name,n.eq);this.tokens.appendCode(' = require("flow-enums-runtime")');const o=!e&&!t;for(this.tokens.replaceTokenTrimmingLeftWhitespace(o?".Mirrored([":"({");!this.tokens.matches1(n.braceR);){if(this.tokens.matches1(n.ellipsis)){this.tokens.removeToken();break}this.processEnumElement(e,t),this.tokens.matches1(n.comma)&&this.tokens.copyToken()}this.tokens.replaceToken(o?"]);":"});")}processEnumElement(e,t){if(e){const o=this.tokens.identifierName();this.tokens.copyToken(),this.tokens.appendCode(`: Symbol("${o}")`)}else t?(this.tokens.copyToken(),this.tokens.replaceTokenTrimmingLeftWhitespace(":"),this.tokens.copyToken()):this.tokens.replaceToken(`"${this.tokens.identifierName()}"`)}}function ni(s){let e,t=s[0],o=1;for(;o<s.length;){const i=s[o],a=s[o+1];if(o+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=a(t)):(i==="call"||i==="optionalCall")&&(t=a((...h)=>t.call(e,...h)),e=void 0)}return t}const Vt="jest",oi=["mock","unmock","enableAutomock","disableAutomock"];class Ms extends fe{__init(){this.hoistedFunctionNames=[]}constructor(e,t,o,i){super(),this.rootTransformer=e,this.tokens=t,this.nameManager=o,this.importProcessor=i,Ms.prototype.__init.call(this)}process(){return this.tokens.currentToken().scopeDepth===0&&this.tokens.matches4(n.name,n.dot,n.name,n.parenL)&&this.tokens.identifierName()===Vt?ni([this,"access",e=>e.importProcessor,"optionalAccess",e=>e.getGlobalNames,"call",e=>e(),"optionalAccess",e=>e.has,"call",e=>e(Vt)])?!1:this.extractHoistedCalls():!1}getHoistedCode(){return this.hoistedFunctionNames.length>0?this.hoistedFunctionNames.map(e=>`${e}();`).join(""):""}extractHoistedCalls(){this.tokens.removeToken();let e=!1;for(;this.tokens.matches3(n.dot,n.name,n.parenL);){const t=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);if(oi.includes(t)){const i=this.nameManager.claimFreeName("__jestHoist");this.hoistedFunctionNames.push(i),this.tokens.replaceToken(`function ${i}(){${Vt}.`),this.tokens.copyToken(),this.tokens.copyToken(),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.parenR),this.tokens.appendCode(";}"),e=!1}else e?this.tokens.copyToken():this.tokens.replaceToken(`${Vt}.`),this.tokens.copyToken(),this.tokens.copyToken(),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.parenR),e=!0}return!0}}class ri extends fe{constructor(e){super(),this.tokens=e}process(){if(this.tokens.matches1(n.num)){const e=this.tokens.currentTokenCode();if(e.includes("_"))return this.tokens.replaceToken(e.replace(/_/g,"")),!0}return!1}}class ii extends fe{constructor(e,t){super(),this.tokens=e,this.nameManager=t}process(){return this.tokens.matches2(n._catch,n.braceL)?(this.tokens.copyToken(),this.tokens.appendCode(` (${this.nameManager.claimFreeName("e")})`),!0):!1}}class ai extends fe{constructor(e,t){super(),this.tokens=e,this.nameManager=t}process(){if(this.tokens.matches1(n.nullishCoalescing)){const o=this.tokens.currentToken();return this.tokens.tokens[o.nullishStartIndex].isAsyncOperation?this.tokens.replaceTokenTrimmingLeftWhitespace(", async () => ("):this.tokens.replaceTokenTrimmingLeftWhitespace(", () => ("),!0}if(this.tokens.matches1(n._delete)&&this.tokens.tokenAtRelativeIndex(1).isOptionalChainStart)return this.tokens.removeInitialToken(),!0;const t=this.tokens.currentToken().subscriptStartIndex;if(t!=null&&this.tokens.tokens[t].isOptionalChainStart&&this.tokens.tokenAtRelativeIndex(-1).type!==n._super){const o=this.nameManager.claimFreeName("_");let i;if(t>0&&this.tokens.matches1AtIndex(t-1,n._delete)&&this.isLastSubscriptInChain()?i=`${o} => delete ${o}`:i=`${o} => ${o}`,this.tokens.tokens[t].isAsyncOperation&&(i=`async ${i}`),this.tokens.matches2(n.questionDot,n.parenL)||this.tokens.matches2(n.questionDot,n.lessThan))this.justSkippedSuper()&&this.tokens.appendCode(".bind(this)"),this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'optionalCall', ${i}`);else if(this.tokens.matches2(n.questionDot,n.bracketL))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'optionalAccess', ${i}`);else if(this.tokens.matches1(n.questionDot))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'optionalAccess', ${i}.`);else if(this.tokens.matches1(n.dot))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'access', ${i}.`);else if(this.tokens.matches1(n.bracketL))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'access', ${i}[`);else if(this.tokens.matches1(n.parenL))this.justSkippedSuper()&&this.tokens.appendCode(".bind(this)"),this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'call', ${i}(`);else throw new Error("Unexpected subscript operator in optional chain.");return!0}return!1}isLastSubscriptInChain(){let e=0;for(let t=this.tokens.currentIndex()+1;;t++){if(t>=this.tokens.tokens.length)throw new Error("Reached the end of the code while finding the end of the access chain.");if(this.tokens.tokens[t].isOptionalChainStart?e++:this.tokens.tokens[t].isOptionalChainEnd&&e--,e<0)return!0;if(e===0&&this.tokens.tokens[t].subscriptStartIndex!=null)return!1}}justSkippedSuper(){let e=0,t=this.tokens.currentIndex()-1;for(;;){if(t<0)throw new Error("Reached the start of the code while finding the start of the access chain.");if(this.tokens.tokens[t].isOptionalChainStart?e--:this.tokens.tokens[t].isOptionalChainEnd&&e++,e<0)return!1;if(e===0&&this.tokens.tokens[t].subscriptStartIndex!=null)return this.tokens.tokens[t-1].type===n._super;t--}}}class ci extends fe{constructor(e,t,o,i){super(),this.rootTransformer=e,this.tokens=t,this.importProcessor=o,this.options=i}process(){const e=this.tokens.currentIndex();if(this.tokens.identifierName()==="createReactClass"){const t=this.importProcessor&&this.importProcessor.getIdentifierReplacement("createReactClass");return t?this.tokens.replaceToken(`(0, ${t})`):this.tokens.copyToken(),this.tryProcessCreateClassCall(e),!0}if(this.tokens.matches3(n.name,n.dot,n.name)&&this.tokens.identifierName()==="React"&&this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+2)==="createClass"){const t=this.importProcessor&&this.importProcessor.getIdentifierReplacement("React")||"React";return this.tokens.replaceToken(t),this.tokens.copyToken(),this.tokens.copyToken(),this.tryProcessCreateClassCall(e),!0}return!1}tryProcessCreateClassCall(e){const t=this.findDisplayName(e);t&&this.classNeedsDisplayName()&&(this.tokens.copyExpectedToken(n.parenL),this.tokens.copyExpectedToken(n.braceL),this.tokens.appendCode(`displayName: '${t}',`),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(n.braceR),this.tokens.copyExpectedToken(n.parenR))}findDisplayName(e){return e<2?null:this.tokens.matches2AtIndex(e-2,n.name,n.eq)?this.tokens.identifierNameAtIndex(e-2):e>=2&&this.tokens.tokens[e-2].identifierRole===Se.ObjectKey?this.tokens.identifierNameAtIndex(e-2):this.tokens.matches2AtIndex(e-2,n._export,n._default)?this.getDisplayNameFromFilename():null}getDisplayNameFromFilename(){const t=(this.options.filePath||"unknown").split("/"),o=t[t.length-1],i=o.lastIndexOf("."),a=i===-1?o:o.slice(0,i);return a==="index"&&t[t.length-2]?t[t.length-2]:a}classNeedsDisplayName(){let e=this.tokens.currentIndex();if(!this.tokens.matches2(n.parenL,n.braceL))return!1;const t=e+1,o=this.tokens.tokens[t].contextId;if(o==null)throw new Error("Expected non-null context ID on object open-brace.");for(;e<this.tokens.tokens.length;e++){const i=this.tokens.tokens[e];if(i.type===n.braceR&&i.contextId===o){e++;break}if(this.tokens.identifierNameAtIndex(e)==="displayName"&&this.tokens.tokens[e].identifierRole===Se.ObjectKey&&i.contextId===o)return!1}if(e===this.tokens.tokens.length)throw new Error("Unexpected end of input when processing React class.");return this.tokens.matches1AtIndex(e,n.parenR)||this.tokens.matches2AtIndex(e,n.comma,n.parenR)}}class Bs extends fe{__init(){this.extractedDefaultExportName=null}constructor(e,t){super(),this.tokens=e,this.filePath=t,Bs.prototype.__init.call(this)}setExtractedDefaultExportName(e){this.extractedDefaultExportName=e}getPrefixCode(){return`
      (function () {
        var enterModule = require('react-hot-loader').enterModule;
        enterModule && enterModule(module);
      })();`.replace(/\s+/g," ").trim()}getSuffixCode(){const e=new Set;for(const o of this.tokens.tokens)!o.isType&&so(o)&&o.identifierRole!==Se.ImportDeclaration&&e.add(this.tokens.identifierNameForToken(o));const t=Array.from(e).map(o=>({variableName:o,uniqueLocalName:o}));return this.extractedDefaultExportName&&t.push({variableName:this.extractedDefaultExportName,uniqueLocalName:"default"}),`
;(function () {
  var reactHotLoader = require('react-hot-loader').default;
  var leaveModule = require('react-hot-loader').leaveModule;
  if (!reactHotLoader) {
    return;
  }
${t.map(({variableName:o,uniqueLocalName:i})=>`  reactHotLoader.register(${o}, "${i}", ${JSON.stringify(this.filePath||"")});`).join(`
`)}
  leaveModule(module);
})();`}process(){return!1}}const li=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","await","false","null","true"]);function qn(s){if(s.length===0||!xr[s.charCodeAt(0)])return!1;for(let e=1;e<s.length;e++)if(!gr[s.charCodeAt(e)])return!1;return!li.has(s)}class hi extends fe{constructor(e,t,o){super(),this.rootTransformer=e,this.tokens=t,this.isImportsTransformEnabled=o}process(){return this.rootTransformer.processPossibleArrowParamEnd()||this.rootTransformer.processPossibleAsyncArrowWithTypeParams()||this.rootTransformer.processPossibleTypeRange()?!0:this.tokens.matches1(n._public)||this.tokens.matches1(n._protected)||this.tokens.matches1(n._private)||this.tokens.matches1(n._abstract)||this.tokens.matches1(n._readonly)||this.tokens.matches1(n._override)||this.tokens.matches1(n.nonNullAssertion)?(this.tokens.removeInitialToken(),!0):this.tokens.matches1(n._enum)||this.tokens.matches2(n._const,n._enum)?(this.processEnum(),!0):this.tokens.matches2(n._export,n._enum)||this.tokens.matches3(n._export,n._const,n._enum)?(this.processEnum(!0),!0):!1}processEnum(e=!1){for(this.tokens.removeInitialToken();this.tokens.matches1(n._const)||this.tokens.matches1(n._enum);)this.tokens.removeToken();const t=this.tokens.identifierName();this.tokens.removeToken(),e&&!this.isImportsTransformEnabled&&this.tokens.appendCode("export "),this.tokens.appendCode(`var ${t}; (function (${t})`),this.tokens.copyExpectedToken(n.braceL),this.processEnumBody(t),this.tokens.copyExpectedToken(n.braceR),e&&this.isImportsTransformEnabled?this.tokens.appendCode(`)(${t} || (exports.${t} = ${t} = {}));`):this.tokens.appendCode(`)(${t} || (${t} = {}));`)}processEnumBody(e){let t=null;for(;!this.tokens.matches1(n.braceR);){const{nameStringCode:o,variableName:i}=this.extractEnumKeyInfo(this.tokens.currentToken());this.tokens.removeInitialToken(),this.tokens.matches3(n.eq,n.string,n.comma)||this.tokens.matches3(n.eq,n.string,n.braceR)?this.processStringLiteralEnumMember(e,o,i):this.tokens.matches1(n.eq)?this.processExplicitValueEnumMember(e,o,i):this.processImplicitValueEnumMember(e,o,i,t),this.tokens.matches1(n.comma)&&this.tokens.removeToken(),i!=null?t=i:t=`${e}[${o}]`}}extractEnumKeyInfo(e){if(e.type===n.name){const t=this.tokens.identifierNameForToken(e);return{nameStringCode:`"${t}"`,variableName:qn(t)?t:null}}else if(e.type===n.string){const t=this.tokens.stringValueForToken(e);return{nameStringCode:this.tokens.code.slice(e.start,e.end),variableName:qn(t)?t:null}}else throw new Error("Expected name or string at beginning of enum element.")}processStringLiteralEnumMember(e,t,o){o!=null?(this.tokens.appendCode(`const ${o}`),this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.appendCode(`; ${e}[${t}] = ${o};`)):(this.tokens.appendCode(`${e}[${t}]`),this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.appendCode(";"))}processExplicitValueEnumMember(e,t,o){const i=this.tokens.currentToken().rhsEndIndex;if(i==null)throw new Error("Expected rhsEndIndex on enum assign.");if(o!=null){for(this.tokens.appendCode(`const ${o}`),this.tokens.copyToken();this.tokens.currentIndex()<i;)this.rootTransformer.processToken();this.tokens.appendCode(`; ${e}[${e}[${t}] = ${o}] = ${t};`)}else{for(this.tokens.appendCode(`${e}[${e}[${t}]`),this.tokens.copyToken();this.tokens.currentIndex()<i;)this.rootTransformer.processToken();this.tokens.appendCode(`] = ${t};`)}}processImplicitValueEnumMember(e,t,o,i){let a=i!=null?`${i} + 1`:"0";o!=null&&(this.tokens.appendCode(`const ${o} = ${a}; `),a=o),this.tokens.appendCode(`${e}[${e}[${t}] = ${a}] = ${t};`)}}class es{__init(){this.transformers=[]}__init2(){this.generatedVariables=[]}constructor(e,t,o,i){es.prototype.__init.call(this),es.prototype.__init2.call(this),this.nameManager=e.nameManager,this.helperManager=e.helperManager;const{tokenProcessor:a,importProcessor:h}=e;this.tokens=a,this.isImportsTransformEnabled=t.includes("imports"),this.isReactHotLoaderTransformEnabled=t.includes("react-hot-loader"),this.disableESTransforms=!!i.disableESTransforms,i.disableESTransforms||(this.transformers.push(new ai(a,this.nameManager)),this.transformers.push(new ri(a)),this.transformers.push(new ii(a,this.nameManager))),t.includes("jsx")&&(i.jsxRuntime!=="preserve"&&this.transformers.push(new Ge(this,a,h,this.nameManager,i)),this.transformers.push(new ci(this,a,h,i)));let d=null;if(t.includes("react-hot-loader")){if(!i.filePath)throw new Error("filePath is required when using the react-hot-loader transform.");d=new Bs(a,i.filePath),this.transformers.push(d)}if(t.includes("imports")){if(h===null)throw new Error("Expected non-null importProcessor with imports transform enabled.");this.transformers.push(new xt(this,a,h,this.nameManager,this.helperManager,d,o,!!i.enableLegacyTypeScriptModuleInterop,t.includes("typescript"),t.includes("flow"),!!i.preserveDynamicImport,!!i.keepUnusedImports))}else this.transformers.push(new ti(a,this.nameManager,this.helperManager,d,t.includes("typescript"),t.includes("flow"),!!i.keepUnusedImports,i));t.includes("flow")&&this.transformers.push(new si(this,a,t.includes("imports"))),t.includes("typescript")&&this.transformers.push(new hi(this,a,t.includes("imports"))),t.includes("jest")&&this.transformers.push(new Ms(this,a,this.nameManager,h))}transform(){this.tokens.reset(),this.processBalancedCode();let t=this.isImportsTransformEnabled?'"use strict";':"";for(const h of this.transformers)t+=h.getPrefixCode();t+=this.helperManager.emitHelpers(),t+=this.generatedVariables.map(h=>` var ${h};`).join("");for(const h of this.transformers)t+=h.getHoistedCode();let o="";for(const h of this.transformers)o+=h.getSuffixCode();const i=this.tokens.finish();let{code:a}=i;if(a.startsWith("#!")){let h=a.indexOf(`
`);return h===-1&&(h=a.length,a+=`
`),{code:a.slice(0,h+1)+t+a.slice(h+1)+o,mappings:this.shiftMappings(i.mappings,t.length)}}else return{code:t+a+o,mappings:this.shiftMappings(i.mappings,t.length)}}processBalancedCode(){let e=0,t=0;for(;!this.tokens.isAtEnd();){if(this.tokens.matches1(n.braceL)||this.tokens.matches1(n.dollarBraceL))e++;else if(this.tokens.matches1(n.braceR)){if(e===0)return;e--}if(this.tokens.matches1(n.parenL))t++;else if(this.tokens.matches1(n.parenR)){if(t===0)return;t--}this.processToken()}}processToken(){if(this.tokens.matches1(n._class)){this.processClass();return}for(const e of this.transformers)if(e.process())return;this.tokens.copyToken()}processNamedClass(){if(!this.tokens.matches2(n._class,n.name))throw new Error("Expected identifier for exported class name.");const e=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);return this.processClass(),e}processClass(){const e=Qr(this,this.tokens,this.nameManager,this.disableESTransforms),t=(e.headerInfo.isExpression||!e.headerInfo.className)&&e.staticInitializerNames.length+e.instanceInitializerNames.length>0;let o=e.headerInfo.className;t&&(o=this.nameManager.claimFreeName("_class"),this.generatedVariables.push(o),this.tokens.appendCode(` (${o} =`));const a=this.tokens.currentToken().contextId;if(a==null)throw new Error("Expected class to have a context ID.");for(this.tokens.copyExpectedToken(n._class);!this.tokens.matchesContextIdAndLabel(n.braceL,a);)this.processToken();this.processClassBody(e,o);const h=e.staticInitializerNames.map(d=>`${o}.${d}()`);t?this.tokens.appendCode(`, ${h.map(d=>`${d}, `).join("")}${o})`):e.staticInitializerNames.length>0&&this.tokens.appendCode(` ${h.map(d=>`${d};`).join(" ")}`)}processClassBody(e,t){const{headerInfo:o,constructorInsertPos:i,constructorInitializerStatements:a,fields:h,instanceInitializerNames:d,rangesToRemove:T}=e;let m=0,f=0;const k=this.tokens.currentToken().contextId;if(k==null)throw new Error("Expected non-null context ID on class.");this.tokens.copyExpectedToken(n.braceL),this.isReactHotLoaderTransformEnabled&&this.tokens.appendCode("__reactstandin__regenerateByEval(key, code) {this[key] = eval(code);}");const C=a.length+d.length>0;if(i===null&&C){const I=this.makeConstructorInitCode(a,d,t);if(o.hasSuperclass){const w=this.nameManager.claimFreeName("args");this.tokens.appendCode(`constructor(...${w}) { super(...${w}); ${I}; }`)}else this.tokens.appendCode(`constructor() { ${I}; }`)}for(;!this.tokens.matchesContextIdAndLabel(n.braceR,k);)if(m<h.length&&this.tokens.currentIndex()===h[m].start){let I=!1;for(this.tokens.matches1(n.bracketL)?this.tokens.copyTokenWithPrefix(`${h[m].initializerName}() {this`):this.tokens.matches1(n.string)||this.tokens.matches1(n.num)?(this.tokens.copyTokenWithPrefix(`${h[m].initializerName}() {this[`),I=!0):this.tokens.copyTokenWithPrefix(`${h[m].initializerName}() {this.`);this.tokens.currentIndex()<h[m].end;)I&&this.tokens.currentIndex()===h[m].equalsIndex&&this.tokens.appendCode("]"),this.processToken();this.tokens.appendCode("}"),m++}else if(f<T.length&&this.tokens.currentIndex()>=T[f].start){for(this.tokens.currentIndex()<T[f].end&&this.tokens.removeInitialToken();this.tokens.currentIndex()<T[f].end;)this.tokens.removeToken();f++}else this.tokens.currentIndex()===i?(this.tokens.copyToken(),C&&this.tokens.appendCode(`;${this.makeConstructorInitCode(a,d,t)};`),this.processToken()):this.processToken();this.tokens.copyExpectedToken(n.braceR)}makeConstructorInitCode(e,t,o){return[...e,...t.map(i=>`${o}.prototype.${i}.call(this)`)].join(";")}processPossibleArrowParamEnd(){if(this.tokens.matches2(n.parenR,n.colon)&&this.tokens.tokenAtRelativeIndex(1).isType){let e=this.tokens.currentIndex()+1;for(;this.tokens.tokens[e].isType;)e++;if(this.tokens.matches1AtIndex(e,n.arrow)){for(this.tokens.removeInitialToken();this.tokens.currentIndex()<e;)this.tokens.removeToken();return this.tokens.replaceTokenTrimmingLeftWhitespace(") =>"),!0}}return!1}processPossibleAsyncArrowWithTypeParams(){if(!this.tokens.matchesContextual(V._async)&&!this.tokens.matches1(n._async))return!1;const e=this.tokens.tokenAtRelativeIndex(1);if(e.type!==n.lessThan||!e.isType)return!1;let t=this.tokens.currentIndex()+1;for(;this.tokens.tokens[t].isType;)t++;if(this.tokens.matches1AtIndex(t,n.parenL)){for(this.tokens.replaceToken("async ("),this.tokens.removeInitialToken();this.tokens.currentIndex()<t;)this.tokens.removeToken();return this.tokens.removeToken(),this.processBalancedCode(),this.processToken(),!0}return!1}processPossibleTypeRange(){if(this.tokens.currentToken().isType){for(this.tokens.removeInitialToken();this.tokens.currentToken().isType;)this.tokens.removeToken();return!0}return!1}shiftMappings(e,t){for(let o=0;o<e.length;o++){const i=e[o];i!==void 0&&(e[o]=i+t)}return e}}function ui(s){const e=new Set;for(let t=0;t<s.tokens.length;t++)s.matches1AtIndex(t,n._import)&&!s.matches3AtIndex(t,n._import,n.name,n.eq)&&pi(s,t,e);return e}function pi(s,e,t){e++,!s.matches1AtIndex(e,n.parenL)&&(s.matches1AtIndex(e,n.name)&&(t.add(s.identifierNameAtIndex(e)),e++,s.matches1AtIndex(e,n.comma)&&e++),s.matches1AtIndex(e,n.star)&&(e+=2,t.add(s.identifierNameAtIndex(e)),e++),s.matches1AtIndex(e,n.braceL)&&(e++,di(s,e,t)))}function di(s,e,t){for(;;){if(s.matches1AtIndex(e,n.braceR))return;const o=gt(s,e);if(e=o.endIndex,o.isType||t.add(o.rightName),s.matches2AtIndex(e,n.comma,n.braceR))return;if(s.matches1AtIndex(e,n.braceR))return;if(s.matches1AtIndex(e,n.comma))e++;else throw new Error(`Unexpected token: ${JSON.stringify(s.tokens[e])}`)}}function mi(s,e){Tr(e);try{const t=fi(s,e),i=new es(t,e.transforms,!!e.enableLegacyBabel5ModuleInterop,e).transform();let a={code:i.code};if(e.sourceMapOptions){if(!e.filePath)throw new Error("filePath must be specified when generating a source map.");a={...a,sourceMap:Ur(i,e.filePath,e.sourceMapOptions,s,t.tokenProcessor.tokens)}}return a}catch(t){throw e.filePath&&(t.message=`Error transforming ${e.filePath}: ${t.message}`),t}}function fi(s,e){const t=e.transforms.includes("jsx"),o=e.transforms.includes("typescript"),i=e.transforms.includes("flow"),a=e.disableESTransforms===!0,h=yr(s,t,o,i),d=h.tokens,T=h.scopes,m=new Ps(s,d),f=new Qt(m),k=new kt(s,d,i,a,f),C=!!e.enableLegacyTypeScriptModuleInterop;let I=null;return e.transforms.includes("imports")?(I=new Je(m,k,C,e,e.transforms.includes("typescript"),!!e.keepUnusedImports,f),I.preprocessTokens(),Bn(k,T,I.getGlobalNames()),e.transforms.includes("typescript")&&!e.keepUnusedImports&&I.pruneTypeOnlyImports()):e.transforms.includes("typescript")&&!e.keepUnusedImports&&Bn(k,T,ui(k)),{tokenProcessor:k,scopes:T,nameManager:m,importProcessor:I,helperManager:f}}const Ye=s=>typeof s,rt="",ki=Ye(rt),xi=Ye(!0),mo=Ye(0),gi=Ye(Ye),Ot="type",Ae="default",qt="allowNull",Ti="null",yi="Listener",Ii="add",He="Has",hs="Ids",ot="Table",Hn=ot+"s",Ci=ot+hs,ts="Row",Ei=ts+"Count",bi=ts+hs,Yt="Cell",zn=Yt+hs,ss="Value",Un=ss+"s",wi=ss+hs,M=s=>rt+s,fo=s=>(e,t,o)=>s(e)?o?.():t(e),Ni=isFinite,vi=(s,e)=>s instanceof e,ns=s=>s==null,ne=s=>s===void 0,Ke=s=>s===null,Ai=fo(ns),K=fo(ne),ko=s=>s==ki||s==xi,Cs=s=>Ye(s)==gi,xo=s=>Array.isArray(s),Wn=(s,e,t)=>s.slice(e,t),_e=s=>s.length,Si=(s,e)=>s.test(e),Es=async(s,e,t)=>{try{return await s()}catch(o){e?.(o)}},_i=(s,e)=>s.includes(e),Ri=(s,e)=>s.every(e),Li=(s,e)=>_e(s)===_e(e)&&Ri(s,(t,o)=>e[o]===t),$i=(s,e)=>s.sort(e),Tt=(s,e)=>s.forEach(e),os=(s,e)=>s.map(e),ji=(s,e,t)=>s.reduce(e,t),rs=(s,...e)=>s.push(...e),Fi=s=>s.shift(),lt=s=>{if(Ke(s))return Ti;const e=Ye(s);return ko(e)||e==mo&&Ni(s)?e:void 0},Gn=(s,e,t,o,i)=>ne(i)?s.delCell(e,t,o,!0):s.setCell(e,t,o,i),Jn=(s,e,t)=>ne(t)?s.delValue(e):s.setValue(e,t),Vs=s=>e=>ji(Di(e),(t,o)=>t+s(o),0),Os=s=>s?.size??0,qs=Vs(Os),pt=Vs(qs),bs=Vs(pt),se=(s,e)=>s?.has(e)??!1,S=s=>ne(s)||Os(s)==0,Di=s=>[...s?.values()??[]],ws=s=>s.clear(),$=(s,e)=>s?.forEach(e),is=(s,e)=>s?.delete(e),Oe=Object,Xn=s=>Oe.getPrototypeOf(s),Pi=Oe.isFrozen,go=Oe.entries,as=s=>!ns(s)&&Ai(Xn(s),e=>e==Oe.prototype||ns(Xn(e)),()=>!0),Mi=Oe.keys,Bi=Oe.freeze,Vi=(s=[])=>Oe.fromEntries(s),dt=(s,e)=>e in s,To=(s,e)=>(delete s[e],s),Oi=(s,e)=>Tt(go(s),([t,o])=>e(o,t)),qi=(s,e)=>os(go(s),([t,o])=>e(o,t)),Pe=(s,e)=>Vi(qi(s,(t,o)=>[o,e(t,o)])),Hi=s=>_e(Mi(s)),Ce=s=>as(s)&&Hi(s)==0,De=(s,e,t,o=0)=>ns(s)||!as(s)||!o&&Ce(s)||Pi(s)?(t?.(),!1):(Oi(s,(i,a)=>{e(i,a)||To(s,a)}),o?!0:!Ce(s)),_=s=>new Map(s),ht=s=>[...s?.keys()??[]],y=(s,e)=>s?.get(e),Me=(s,e)=>$(s,(t,o)=>e(o,t)),zi=(s,e)=>os([...s?.entries()??[]],([t,o])=>e(o,t)),B=(s,e,t)=>ne(t)?(is(s,e),s):s?.set(e,t),Z=(s,e,t,o)=>(se(s,e)?o?.(y(s,e)):B(s,e,t()),y(s,e)),ze=(s,e,t,o=B)=>(Pe(e,(i,a)=>t(s,a,i)),Me(s,i=>dt(e,i)?0:o(s,i)),s),ae=(s,e,t,o)=>{const i={};return $(s,(a,h)=>{if(!t?.(a,h)){const d=e?e(a,h):a;o?.(d)||(i[h]=d)}}),i},As=(s,e,t)=>ae(s,o=>ae(o,e,t),S,Ce),Ht=(s,e,t)=>ae(s,o=>As(o,e,t),S,Ce),Be=(s,e)=>{const t=_();return $(s,(o,i)=>t.set(i,e?.(o)??o)),t},Ss=s=>Be(s,Be),Ns=s=>Be(s,Ss),_s=(s,e,t,o,i=0)=>K((t?Z:y)(s,e[i],i>_e(e)-2?t:_),a=>{if(i>_e(e)-2)return o?.(a)&&B(s,e[i]),a;const h=_s(a,e,t,o,i+1);return S(a)&&B(s,e[i]),h}),mt=s=>new Set(xo(s)||ne(s)?s:[s]),ft=(s,e)=>s?.add(e),Ui=/^\d+$/,yo=()=>{const s=[];let e=0;return[t=>(t?Fi(s):null)??rt+e++,t=>{Si(Ui,t)&&_e(s)<1e3&&rs(s,t)}]},Wi=(s,e=[rt])=>{const t=[],o=(i,a)=>a==_e(e)?rs(t,i):Ke(e[a])?$(i,h=>o(h,a+1)):Tt([e[a],null],h=>o(y(i,h),a+1));return o(s,0),t},Gi=s=>{let e;const[t,o]=yo(),i=_();return[(m,f,k,C=[],I=()=>[])=>{e??=s();const w=t(1);return B(i,w,[m,f,k,C,I]),ft(_s(f,k??[rt],mt),w),w},(m,f,...k)=>Tt(Wi(m,f),C=>$(C,I=>y(i,I)[0](e,...f??[],...k))),m=>K(y(i,m),([,f,k])=>(_s(f,k??[rt],void 0,C=>(is(C,m),S(C)?1:0)),B(i,m),o(m),k)),m=>K(y(i,m),([f,,k=[],C,I])=>{const w=(...N)=>{const j=_e(N);j==_e(k)?f(e,...N,...I(N)):Ke(k[j])?Tt(C[j]?.(...N)??[],O=>w(...N,O)):w(...N,k[j])};w()})]},Ji=JSON.stringify,vs=JSON.parse,st=s=>Ji(s,(e,t)=>vi(t,Map)?Oe.fromEntries([...t]):t),Xi=(s,e)=>(s??0)<(e??0)?-1:1,zt=s=>[s,s],H=(s,e=qs)=>e(s[0])+e(s[1]),z=()=>[_(),_()],Kn=s=>[...s],Ut=([s,e])=>s===e,ut=(s,e,t)=>B(s,e,y(s,e)==-t?void 0:t),Io=()=>{let s,e,t=!1,o=!1,i=0,a=[];const h=_(),d=_(),T=_(),m=_(),f=_(),k=_(),C=_(),I=_(),w=_(),N=_(),j=_(),O=_(),oe=_(),te=_(),Y=mt(),ke=_(),Q=_(),L=_(),U=_(),ce=z(),Ee=z(),xe=z(),ge=z(),Te=z(),de=z(),Re=z(),ye=z(),Ie=z(),re=z(),be=z(),Le=z(),b=z(),A=z(),F=z(),W=z(),le=z(),we=z(),$e=z(),qe=z(),J=z(),R=z(),ie=_(),ue=z(),[je,X,_o,Ro]=Gi(()=>ee),Lo=r=>De(r,c=>De(c,zs)),$o=r=>De(r,zs),zs=r=>{if(!De(r,(u,p)=>_i([Ot,Ae,qt],p)))return!1;const c=r[Ot];if(!ko(c)&&c!=mo)return!1;const l=r[Ae];return Ke(l)&&!r[qt]?!1:(!Ke(l)&&lt(l)!=c&&To(r,Ae),!0)},jo=xo,Fo=r=>De(r,Us,Ne),Us=(r,c)=>(!s||se(j,c)||Ne(c))&&De(r,(l,u)=>Ct(c,u,l),()=>Ne(c)),Ct=(r,c,l,u)=>De(u?l:Xs(l,r,c),(p,x)=>K(Ws(r,c,x,p),E=>(l[x]=E,!0),()=>!1),()=>Ne(r,c)),Ws=(r,c,l,u)=>s?K(y(y(j,r),l),p=>Ke(u)?p[qt]?u:Ne(r,c,l,u,p[Ae]):lt(u)==p[Ot]?u:Ne(r,c,l,u,p[Ae]),()=>Ne(r,c,l,u)):ne(lt(u))?Ne(r,c,l,u):u,Gs=(r,c)=>De(c?r:Do(r),(l,u)=>K(Js(u,l),p=>(r[u]=p,!0),()=>!1),()=>et()),Js=(r,c)=>e?K(y(oe,r),l=>Ke(c)?l[qt]?c:et(r,c,l[Ae]):lt(c)==l[Ot]?c:et(r,c,l[Ae]),()=>et(r,c)):ne(lt(c))?et(r,c):c,Xs=(r,c,l)=>(K(y(O,c),([u,p])=>{$(u,(x,E)=>{dt(r,E)||(r[E]=x)}),$(p,x=>{dt(r,x)||Ne(c,l,x)})}),r),Do=r=>(e&&($(te,(c,l)=>{dt(r,l)||(r[l]=c)}),$(Y,c=>{dt(r,c)||et(c)})),r),Ks=r=>ze(j,r,(c,l,u)=>{const p=_(),x=mt();ze(Z(j,l,_),u,(E,D,P)=>{B(E,D,P),K(P[Ae],ve=>B(p,D,ve),()=>ft(x,D))}),B(O,l,[p,x])},(c,l)=>{B(j,l),B(O,l)}),Ys=r=>ze(oe,r,(c,l,u)=>{B(oe,l,u),K(u[Ae],p=>B(te,l,p),()=>ft(Y,l))},(c,l)=>{B(oe,l),B(te,l),is(Y,l)}),Qs=r=>Ce(r)?jt():Lt(r),Po=([r,c])=>{(Ce(r)?jt:Lt)(r),(Ce(c)?Ft:$t)(c)},Zs=r=>ze(L,r,(c,l,u)=>Et(l,u),(c,l)=>nn(l)),Et=(r,c)=>ze(Z(L,r,()=>(cn(r,1),B(ke,r,yo()),B(Q,r,_()),_())),c,(l,u,p)=>it(r,l,u,p),(l,u)=>on(r,l,u)),it=(r,c,l,u,p)=>ze(Z(c,l,()=>(ln(r,l,1),_())),u,(x,E,D)=>ps(r,l,x,E,D),(x,E)=>rn(r,c,l,x,E,p)),ps=(r,c,l,u,p)=>{se(l,u)||hn(r,c,u,1);const x=y(l,u);p!==x&&(un(r,c,u,x,p),B(l,u,p))},en=(r,c,l,u,p)=>K(y(c,l),x=>ps(r,l,x,u,p),()=>it(r,c,l,Xs({[u]:p},r,l))),tn=r=>Ce(r)?Ft():$t(r),sn=r=>ze(U,r,(c,l,u)=>bt(l,u),(c,l)=>an(l)),bt=(r,c)=>{se(U,r)||pn(r,1);const l=y(U,r);c!==l&&(dn(r,l,c),B(U,r,c))},Mo=(r,c)=>{const[l]=y(ke,r);let u;do u=l(c);while(se(y(L,r),u));return u},wt=r=>y(L,r)??Et(r,{}),nn=r=>Et(r,{}),on=(r,c,l)=>{const[,u]=y(ke,r);u(l),it(r,c,l,{},!0)},rn=(r,c,l,u,p,x)=>{const E=y(y(O,r)?.[0],p);if(!ne(E)&&!x)return ps(r,l,u,p,E);const D=P=>{un(r,l,P,y(u,P)),hn(r,l,P,-1),B(u,P)};ne(E)?D(p):Me(u,D),S(u)&&(ln(r,l,-1),S(B(c,l))&&(cn(r,-1),B(L,r),B(ke,r),B(Q,r)))},an=r=>{const c=y(te,r);if(!ne(c))return bt(r,c);dn(r,y(U,r)),pn(r,-1),B(U,r)},cn=(r,c)=>ut(h,r,c),ln=(r,c,l)=>ut(Z(m,r,_),c,l)&&B(T,r,Z(T,r,()=>0)+l),hn=(r,c,l,u)=>{const p=y(Q,r),x=y(p,l)??0;(x==0&&u==1||x==1&&u==-1)&&ut(Z(d,r,_),l,u),B(p,l,x!=-u?x+u:void 0),ut(Z(Z(f,r,_),c,_),l,u)},un=(r,c,l,u,p)=>{Z(Z(Z(k,r,_),c,_),l,()=>[u,0])[1]=p,a[3]?.(r,c,l,p)},pn=(r,c)=>ut(C,r,c),dn=(r,c,l)=>{Z(I,r,()=>[c,0])[1]=l,a[4]?.(r,l)},Ne=(r,c,l,u,p)=>(rs(Z(Z(Z(w,r,_),c,_),l,()=>[]),u),p),et=(r,c,l)=>(rs(Z(N,r,()=>[]),c),l),Nt=(r,c,l)=>K(y(y(y(k,r),c),l),([u,p])=>[!0,u,p],()=>[!1,...zt(At(r,c,l))]),mn=r=>K(y(I,r),([c,l])=>[!0,c,l],()=>[!1,...zt(St(r))]),fn=r=>!S(w)&&!S(W[r])?$(r?Ns(w):w,(c,l)=>$(c,(u,p)=>$(u,(x,E)=>X(W[r],[l,p,E],x)))):0,kn=r=>!S(N)&&!S(le[r])?$(r?Be(N):N,(c,l)=>X(le[r],[l],c)):0,at=(r,c,l,u)=>{if(!S(r))return X(c,u,()=>ae(r)),Me(r,(p,x)=>X(l,[...u??[],p],x==1)),1},xn=r=>{const c=_t();c!=t&&X(ce[r],void 0,c);const l=S(re[r]),u=S(b[r])&&S(A[r])&&S(Ie[r])&&S(be[r])&&S(de[r])&&S(Re[r])&&S(ye[r])&&l&&S(xe[r])&&S(ge[r]),p=S(F[r])&&S(Le[r])&&S(Te[r])&&S(Ee[r]);if(!u||!p){const x=r?[Be(h),Ss(d),Be(T),Ss(m),Ns(f),Ns(k)]:[h,d,T,m,f,k];if(!u){at(x[0],xe[r],ge[r]),$(x[1],(D,P)=>at(D,de[r],Re[r],[P])),$(x[2],(D,P)=>{D!=0&&X(ye[r],[P],In(P))});const E=mt();$(x[3],(D,P)=>{at(D,Ie[r],be[r],[P])&&!l&&(X(re[r],[P,null]),ft(E,P))}),l||$(x[5],(D,P)=>{if(!se(E,P)){const ve=mt();$(D,Fe=>$(Fe,([Dt,Pt],ct)=>Pt!==Dt?ft(ve,ct):is(Fe,ct))),$(ve,Fe=>X(re[r],[P,Fe]))}}),$(x[4],(D,P)=>$(D,(ve,Fe)=>at(ve,b[r],A[r],[P,Fe])))}if(!p){let E;$(x[5],(D,P)=>{let ve;$(D,(Fe,Dt)=>{let Pt;$(Fe,([ct,Fn],ur)=>{Fn!==ct&&(X(F[r],[P,Dt,ur],Fn,ct,Nt),E=ve=Pt=1)}),Pt&&X(Le[r],[P,Dt],Nt)}),ve&&X(Te[r],[P],Nt)}),E&&X(Ee[r],void 0,Nt)}}},gn=r=>{const c=Rt();c!=o&&X(we[r],void 0,c);const l=S(qe[r])&&S(J[r]),u=S(R[r])&&S($e[r]);if(!l||!u){const p=r?[Be(C),Be(I)]:[C,I];if(l||at(p[0],qe[r],J[r]),!u){let x;$(p[1],([E,D],P)=>{D!==E&&(X(R[r],[P],D,E,mn),x=1)}),x&&X($e[r],void 0,mn)}}},q=(r,...c)=>(gs(()=>r(...os(c,M))),ee),Tn=(r,c,l,u,p)=>{let x=vt(r,c,...l);return je(()=>{const E=vt(r,c,...l);Li(E,x)||(x=E,u(ee,r,c,...l,x))},re[p?1:0],[r,c],[he])},Bo=()=>[ds(),fs()],ds=()=>Ht(L),he=()=>ht(L),Vo=r=>As(y(L,M(r))),yn=r=>ht(y(Q,M(r))),In=r=>Os(y(L,M(r))),tt=r=>ht(y(L,M(r))),vt=(r,c,l,u=0,p)=>as(r)?vt(r.tableId,r.cellId,r.descending,r.offset,r.limit):os(Wn($i(zi(y(L,M(r)),(x,E)=>[ne(c)?E:y(x,M(c)),E]),([x],[E])=>Xi(x,E)*(l?-1:1)),u,ne(p)?p:u+p),([,x])=>x),Oo=(r,c)=>ae(y(y(L,M(r)),M(c))),ms=(r,c)=>ht(y(y(L,M(r)),M(c))),At=(r,c,l)=>y(y(y(L,M(r)),M(c)),M(l)),fs=()=>ae(U),ks=()=>ht(U),St=r=>y(U,M(r)),_t=()=>!S(L),Cn=r=>se(L,M(r)),En=(r,c)=>se(y(Q,M(r)),M(c)),bn=(r,c)=>se(y(L,M(r)),M(c)),wn=(r,c,l)=>se(y(y(L,M(r)),M(c)),M(l)),Rt=()=>!S(U),Nn=r=>se(U,M(r)),qo=()=>st(L),Ho=()=>st(U),zo=()=>st([L,U]),Uo=()=>st(j),Wo=()=>st(oe),Go=()=>st([j,oe]),Jo=r=>q(()=>{const c=Cs(r)?r():r;jo(c)&&Po(c)}),Lt=r=>q(()=>Fo(r)?Zs(r):0),Xo=(r,c)=>q(l=>Us(c,l)?Et(l,c):0,r),Ko=(r,c,l)=>q((u,p)=>Ct(u,p,l)?it(u,wt(u),p,l):0,r,c),Yo=(r,c,l=!0)=>gs(()=>{let u;return Ct(r,u,c)&&(r=M(r),it(r,wt(r),u=Mo(r,l?1:0),c)),u}),Qo=(r,c,l)=>q((u,p)=>{if(Ct(u,p,l,1)){const x=wt(u);Pe(l,(E,D)=>en(u,x,p,D,E))}},r,c),Zo=(r,c,l,u)=>q((p,x,E)=>K(Ws(p,x,E,Cs(u)?u(At(p,x,E)):u),D=>en(p,wt(p),x,E,D)),r,c,l),$t=r=>q(()=>Gs(r)?sn(r):0),er=r=>q(()=>Gs(r,1)?Pe(r,(c,l)=>bt(l,c)):0),tr=(r,c)=>q(l=>K(Js(l,Cs(c)?c(St(l)):c),u=>bt(l,u)),r),sr=r=>q(()=>{Pe(r[0],(c,l)=>ne(c)?_n(l):Pe(c,(u,p)=>ne(u)?Rn(l,p):Pe(u,(x,E)=>Gn(ee,l,p,E,x)))),Pe(r[1],(c,l)=>Jn(ee,l,c))}),vn=r=>(Es(()=>Qs(vs(r))),ee),nr=r=>(Es(()=>tn(vs(r))),ee),or=r=>q(()=>Es(()=>{const[c,l]=vs(r);Qs(c),tn(l)},()=>vn(r))),An=r=>q(()=>{if((s=Lo(r))&&(Ks(r),!S(L))){const c=ds();jt(),Lt(c)}}),Sn=r=>q(()=>{if(e=$o(r)){const c=fs();xs(),Ft(),e=!0,Ys(r),$t(c)}}),rr=(r,c)=>q(()=>{An(r),Sn(c)}),jt=()=>q(()=>Zs({})),_n=r=>q(c=>se(L,c)?nn(c):0,r),Rn=(r,c)=>q((l,u)=>K(y(L,l),p=>se(p,u)?on(l,p,u):0),r,c),ir=(r,c,l,u)=>q((p,x,E)=>K(y(L,p),D=>K(y(D,x),P=>se(P,E)?rn(p,D,x,P,E,u):0)),r,c,l),Ft=()=>q(()=>sn({})),ar=r=>q(c=>se(U,c)?an(c):0,r),Ln=()=>q(()=>{Ks({}),s=!1}),xs=()=>q(()=>{Ys({}),e=!1}),cr=()=>q(()=>{Ln(),xs()}),gs=(r,c)=>{if(i!=-1){$n();const l=r();return jn(c),l}},$n=()=>(i!=-1&&i++,i==1&&(a[0]?.(),X(ie)),ee),lr=()=>[ae(k,(r,c)=>y(h,c)===-1?void 0:ae(r,(l,u)=>y(y(m,c),u)===-1?void 0:ae(l,([,p])=>p,p=>Ut(p)),S,Ce),S,Ce),ae(I,([,r])=>r,r=>Ut(r)),1],hr=()=>[!S(k),!S(I),Ht(k,Kn,Ut),Ht(w),ae(I,Kn,Ut),ae(N),ae(h),As(m),Ht(f),ae(C)],jn=r=>(i>0&&(i--,i==0&&(i=1,fn(1),S(k)||xn(1),kn(1),S(I)||gn(1),r?.(ee)&&($(k,(c,l)=>$(c,(u,p)=>$(u,([x],E)=>Gn(ee,l,p,E,x)))),ws(k),$(I,([c],l)=>Jn(ee,l,c)),ws(I)),X(ue[0],void 0),i=-1,fn(0),S(k)||xn(0),kn(0),S(I)||gn(0),a[1]?.(),X(ue[1],void 0),a[2]?.(),i=0,t=_t(),o=Rt(),Tt([h,d,T,m,f,k,w,C,I,N],ws))),ee),ee={getContent:Bo,getTables:ds,getTableIds:he,getTable:Vo,getTableCellIds:yn,getRowCount:In,getRowIds:tt,getSortedRowIds:vt,getRow:Oo,getCellIds:ms,getCell:At,getValues:fs,getValueIds:ks,getValue:St,hasTables:_t,hasTable:Cn,hasTableCell:En,hasRow:bn,hasCell:wn,hasValues:Rt,hasValue:Nn,getTablesJson:qo,getValuesJson:Ho,getJson:zo,getTablesSchemaJson:Uo,getValuesSchemaJson:Wo,getSchemaJson:Go,hasTablesSchema:()=>s,hasValuesSchema:()=>e,setContent:Jo,setTables:Lt,setTable:Xo,setRow:Ko,addRow:Yo,setPartialRow:Qo,setCell:Zo,setValues:$t,setPartialValues:er,setValue:tr,applyChanges:sr,setTablesJson:vn,setValuesJson:nr,setJson:or,setTablesSchema:An,setValuesSchema:Sn,setSchema:rr,delTables:jt,delTable:_n,delRow:Rn,delCell:ir,delValues:Ft,delValue:ar,delTablesSchema:Ln,delValuesSchema:xs,delSchema:cr,transaction:gs,startTransaction:$n,getTransactionChanges:lr,getTransactionLog:hr,finishTransaction:jn,forEachTable:r=>$(L,(c,l)=>r(l,u=>$(c,(p,x)=>u(x,E=>Me(p,E))))),forEachTableCell:(r,c)=>Me(y(Q,M(r)),c),forEachRow:(r,c)=>$(y(L,M(r)),(l,u)=>c(u,p=>Me(l,p))),forEachCell:(r,c,l)=>Me(y(y(L,M(r)),M(c)),l),forEachValue:r=>Me(U,r),addSortedRowIdsListener:(r,c,l,u,p,x,E)=>as(r)?Tn(r.tableId,r.cellId,[r.descending??!1,r.offset??0,r.limit],c,l):Tn(r,c,[l,u,p],x,E),addStartTransactionListener:r=>je(r,ie),addWillFinishTransactionListener:r=>je(r,ue[0]),addDidFinishTransactionListener:r=>je(r,ue[1]),callListener:r=>(Ro(r),ee),delListener:r=>(_o(r),ee),getListenerStats:()=>({hasTables:H(ce),tables:H(Ee),tableIds:H(xe),hasTable:H(ge),table:H(Te),tableCellIds:H(de),hasTableCell:H(Re,pt),rowCount:H(ye),rowIds:H(Ie),sortedRowIds:H(re),hasRow:H(be,pt),row:H(Le,pt),cellIds:H(b,pt),hasCell:H(A,bs),cell:H(F,bs),invalidCell:H(W,bs),hasValues:H(we),values:H($e),valueIds:H(qe),hasValue:H(J),value:H(R),invalidValue:H(le),transaction:qs(ie)+H(ue)}),isMergeable:()=>!1,createStore:Io,addListener:je,callListeners:X,setInternalListeners:(r,c,l,u,p)=>a=[r,c,l,u,p]};return Pe({[He+Hn]:[0,ce,[],()=>[_t()]],[Hn]:[0,Ee],[Ci]:[0,xe],[He+ot]:[1,ge,[he],r=>[Cn(...r)]],[ot]:[1,Te,[he]],[ot+zn]:[1,de,[he]],[He+ot+Yt]:[2,Re,[he,yn],r=>[En(...r)]],[Ei]:[1,ye,[he]],[bi]:[1,Ie,[he]],[He+ts]:[2,be,[he,tt],r=>[bn(...r)]],[ts]:[2,Le,[he,tt]],[zn]:[2,b,[he,tt]],[He+Yt]:[3,A,[he,tt,ms],r=>[wn(...r)]],[Yt]:[3,F,[he,tt,ms],r=>zt(At(...r))],InvalidCell:[3,W],[He+Un]:[0,we,[],()=>[Rt()]],[Un]:[0,$e],[wi]:[0,qe],[He+ss]:[1,J,[ks],r=>[Nn(...r)]],[ss]:[1,R,[ks],r=>zt(St(r[0]))],InvalidValue:[1,le]},([r,c,l,u],p)=>{ee[Ii+p+yi]=(...x)=>je(x[r],c[x[r+1]?1:0],r>0?Wn(x,0,r):void 0,l,u)}),Bi(ee)},cs="",Co="￼",Eo=s=>(e,t,o)=>s(e)?o?.():t(e),Ki=globalThis,Yn=Ki.window,Rs=s=>s==null,Ve=s=>s===void 0,bo=s=>s===null,Yi=Eo(Rs),Ls=Eo(Ve),$s=s=>Array.isArray(s),Qe=s=>s.length,Qi=(s,e)=>s.test(e),wo=s=>{throw new Error(s)},nt=async(s,e,t)=>{try{return await s()}catch(o){e?.(o)}},js=(s,e)=>s.forEach(e),Zi=(s,e)=>s.splice(0,e),Hs=(s,...e)=>s.push(...e),No=s=>s.shift(),us=Object,Qn=s=>us.getPrototypeOf(s),ea=s=>!Rs(s)&&Yi(Qn(s),e=>e==us.prototype||Rs(Qn(e)),()=>!0),ta=us.keys,sa=us.freeze,na=s=>Qe(ta(s)),Wt=s=>ea(s)&&na(s)==0,oa=JSON.stringify,ra=JSON.parse,ia=s=>oa(s,(e,t)=>Ve(t)?Co:t),Zn=s=>ra(s,(e,t)=>t===Co?void 0:t),aa=s=>s?.size??0,ca=(s,e)=>s?.has(e)??!1,vo=s=>Ve(s)||aa(s)==0,Ao=(s,e)=>s?.forEach(e),So=(s,e)=>s?.delete(e),It=s=>new Map(s),me=(s,e)=>s?.get(e),Ze=(s,e,t)=>Ve(t)?(So(s,e),s):s?.set(e,t),Fs=(s,e,t,o)=>(ca(s,e)?o?.(me(s,e)):Ze(s,e,t()),me(s,e)),Ds=(s,e,t,o,i=0)=>Ls((t?Fs:me)(s,e[i],i>Qe(e)-2?t:It),a=>{if(i>Qe(e)-2)return o?.(a)&&Ze(s,e[i]),a;const h=Ds(a,e,t,o,i+1);return vo(a)&&Ze(s,e[i]),h}),la=/^\d+$/,ha=()=>{const s=[];let e=0;return[t=>(t?No(s):null)??cs+e++,t=>{Qi(la,t)&&Qe(s)<1e3&&Hs(s,t)}]},ua=s=>new Set($s(s)||Ve(s)?s:[s]),pa=(s,e)=>s?.add(e),da=(s,e=[cs])=>{const t=[],o=(i,a)=>a==Qe(e)?Hs(t,i):bo(e[a])?Ao(i,h=>o(h,a+1)):js([e[a],null],h=>o(me(i,h),a+1));return o(s,0),t},ma=s=>{let e;const[t,o]=ha(),i=It();return[(m,f,k,C=[],I=()=>[])=>{e??=s();const w=t(1);return Ze(i,w,[m,f,k,C,I]),pa(Ds(f,k??[cs],ua),w),w},(m,f,...k)=>js(da(m,f),C=>Ao(C,I=>me(i,I)[0](e,...f??[],...k))),m=>Ls(me(i,m),([,f,k])=>(Ds(f,k??[cs],void 0,C=>(So(C,m),vo(C)?1:0)),Ze(i,m),o(m),k)),m=>Ls(me(i,m),([f,,k=[],C,I])=>{const w=(...N)=>{const j=Qe(N);j==Qe(k)?f(e,...N,...I(N)):bo(k[j])?js(C[j]?.(...N)??[],O=>w(...N,O)):w(...N,k[j])};w()})]},Gt=It(),Jt=It(),fa=(s=1,e,t)=>s!=1&&e.isMergeable()?[1,e.getMergeableContent,()=>e.getTransactionMergeableChanges(!t),([[o],[i]])=>!Wt(o)||!Wt(i),e.setDefaultContent]:s!=2?[0,e.getContent,e.getTransactionChanges,([o,i])=>!Wt(o)||!Wt(i),e.setContent]:wo("Store type not supported by this Persister"),ka=(s,e,t,o,i,a,h,d={},T=0,m=[])=>{let f=0,k=0,C=0,I,w,N;Fs(Gt,m,()=>0),Fs(Jt,m,()=>[]);const j=It(),[O,oe,te,Y,ke]=fa(h,s,T),[Q,L,U]=ma(()=>J),ce=R=>{R!=f&&(f=R,L(j,void 0,f))},Ee=async()=>{if(!me(Gt,m)){for(Ze(Gt,m,1);!Ve(I=No(me(Jt,m)));)await nt(I,a);Ze(Gt,m,0)}},xe=R=>{(O&&$s(R?.[0])?R?.[2]===1?s.applyMergeableChanges:s.setMergeableContent:R?.[2]===1?s.applyChanges:s.setContent)(R)},ge=async R=>(f!=2&&(ce(1),k++,await le(async()=>{await nt(async()=>{const ie=await e();$s(ie)?xe(ie):R?ke(R):wo(`Content is not an array: ${ie}`)},()=>{R&&ke(R)}),ce(0)})),J),Te=async R=>(de(),await ge(R),await nt(async()=>w=await o(async(ie,ue)=>{ue||ie?f!=2&&(ce(1),k++,xe(ue??ie),ce(0)):await ge()}),a),J),de=async()=>(w&&(await nt(()=>i(w),a),w=void 0),J),Re=()=>!Ve(w),ye=async R=>(f!=1&&(ce(2),C++,await le(async()=>{await nt(()=>t(oe,R),a),ce(0)})),J),Ie=async()=>(re(),await ye(),N=s.addDidFinishTransactionListener(()=>{const R=te();Y(R)&&ye(R)}),J),re=async()=>(N&&(s.delListener(N),N=void 0),J),be=()=>!Ve(N),Le=async(R,ie=!1)=>{const[ue,je]=ie?[Ie,Te]:[Te,Ie];return await ue(R),await je(R),J},b=async(R=!1)=>{const[ie,ue]=R?[re,de]:[de,re];return await ie(),await ue(),J},A=()=>f,F=R=>Q(R,j),W=R=>(U(R),s),le=async(...R)=>(Hs(me(Jt,m),...R),await Ee(),J),J={load:ge,startAutoLoad:Te,stopAutoLoad:de,isAutoLoading:Re,save:ye,startAutoSave:Ie,stopAutoSave:re,isAutoSaving:be,startAutoPersisting:Le,stopAutoPersisting:b,getStatus:A,addStatusListener:F,delListener:W,schedule:le,getStore:()=>s,destroy:()=>(Zi(me(Jt,m)),b()),getStats:()=>({loads:k,saves:C}),...d};return sa(J)},eo="storage",xa=(s,e,t,o)=>ka(s,async()=>Zn(t.getItem(e)),async T=>t.setItem(e,ia(T())),T=>{const m=f=>{f.storageArea===t&&f.key===e&&nt(()=>T(Zn(f.newValue)),T)};return Yn.addEventListener(eo,m),m},T=>Yn.removeEventListener(eo,T),o,3,{getStorageName:()=>e}),ga=(s,e,t)=>xa(s,e,localStorage,t);function Ta(){return Io()}function ya(s){return ga(s,"trammel-codex")}function yt(s){return{x:s.x+s.width/2,y:s.y+s.height/2}}function ls(s){return{x:s.cx,y:s.cy}}function Ia(s,e){switch(e){case"topLeft":return{x:s.x,y:s.y};case"topRight":return{x:s.x+s.width,y:s.y};case"bottomLeft":return{x:s.x,y:s.y+s.height};case"bottomRight":return{x:s.x+s.width,y:s.y+s.height};default:return{x:s.x,y:s.y}}}function Ca(s,e){return typeof e=="number"?{x:s.x+e,y:s.y+e,width:s.width-e*2,height:s.height-e*2}:{x:s.x+e.left,y:s.y+e.top,width:s.width-e.left-e.right,height:s.height-e.top-e.bottom}}function Ea(s,e){const t="width"in s?yt(s):ls(s),o="width"in e?yt(e):ls(e);return{x:t.x,y:o.y}}function ba(s,e){const t="width"in s?yt(s):ls(s);return{x:("width"in e?yt(e):ls(e)).x,y:t.y}}function wa(s,e,t){if(s<=0)return[];const o=(t-s*e)/(s+1);return Array.from({length:s},(i,a)=>o+a*(e+o))}const Na=Object.freeze(Object.defineProperty({__proto__:null,alignCenterX:Ea,alignCenterY:ba,distributeEvenly:wa,insetRect:Ca,rectCenter:yt,rectCorner:Ia},Symbol.toStringTag,{value:"Module"})),va="/trammel/assets/replicad_single-BXInhmaQ.wasm";let Xt=null;function Aa(){return Xt||(Xt=(async()=>{const s=performance.now();try{const e=await Ir({locateFile:()=>va});return Cr(e),{ok:!0,ms:performance.now()-s}}catch(e){const t=e instanceof Error?e.message:String(e);return{ok:!1,ms:performance.now()-s,error:t}}})(),Xt)}const v={app:{fontFamily:"system-ui, -apple-system, Segoe UI, sans-serif",color:"#1f2933",background:"#f5f7fa",minHeight:"100vh"},header:{padding:"16px 24px 8px",display:"flex",alignItems:"baseline",gap:16},title:{margin:0,fontSize:22},subtitle:{margin:0,fontSize:13,color:"#52606d"},main:{display:"grid",gridTemplateColumns:"minmax(280px, 420px) minmax(360px, 1fr)",gap:16,padding:"12px 24px 24px"},panel:{background:"#fff",borderRadius:10,border:"1px solid #e4e7eb",padding:16,minHeight:520,display:"flex",flexDirection:"column"},panelHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},panelTitle:{margin:0,fontSize:13,textTransform:"uppercase",letterSpacing:1,color:"#52606d"},errorBadge:{display:"inline-flex",alignItems:"center",gap:6,fontSize:11,color:"#b91c1c",cursor:"pointer"},errorDot:{width:8,height:8,borderRadius:"50%",background:"#ef4444",boxShadow:"0 0 0 2px rgba(239, 68, 68, 0.2)"},editor:{width:"100%",maxWidth:420,flex:1,border:"1px solid #cbd2d9",borderRadius:8,padding:12,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, monospace",fontSize:12.5,lineHeight:1.6,background:"#f8f9fa",color:"#102a43",boxSizing:"border-box"},actions:{display:"flex",gap:8,marginTop:10},button:{border:"1px solid #1f2933",background:"#1f2933",color:"#fff",padding:"6px 12px",borderRadius:6,fontSize:12,cursor:"pointer"},viewport:{flex:1,border:"1px dashed #cbd2d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",background:"#fdfdfc",padding:8},footer:{marginTop:8,fontSize:12,color:"#7b8794"},diagnostics:{marginTop:12,padding:12,borderRadius:10,border:"1px solid #e4e7eb",background:"#f8fafc",fontSize:12,color:"#334e68"},diagTitle:{margin:"0 0 8px",fontSize:12,color:"#52606d",textTransform:"uppercase",letterSpacing:1},diagRow:{display:"flex",justifyContent:"space-between",gap:8,padding:"2px 0"},diagTabs:{display:"flex",gap:8,marginBottom:8},diagTab:{border:"1px solid #cbd2d9",background:"#fff",color:"#1f2933",padding:"2px 8px",borderRadius:999,fontSize:11,cursor:"pointer"},diagTabActive:{border:"1px solid #1f2933",background:"#1f2933",color:"#fff"},diagErrorBox:{marginTop:8,padding:8,borderRadius:8,border:"1px solid #fecaca",background:"#fff5f5",color:"#7f1d1d",whiteSpace:"pre-wrap"},tabs:{display:"flex",gap:8},tabButton:{border:"1px solid #cbd2d9",background:"#f8f9fa",color:"#1f2933",padding:"4px 10px",borderRadius:999,fontSize:12,cursor:"pointer"},tabButtonActive:{border:"1px solid #1f2933",background:"#1f2933",color:"#fff"},source:{width:"100%",height:"100%",padding:12,borderRadius:8,background:"#0b1215",color:"#e5e7eb",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, monospace",fontSize:12,overflow:"auto",whiteSpace:"pre"}},Ue=`// trammel codex demo
const vars = {
  width: 320,
  height: 160,
  cornerRadius: 18,
  panel: '#f2f4f7',
  accent: '#2563eb',
  inset: 14,
  useReplicad: false,
};

const panel: Rect = { x: 0, y: 0, width: vars.width, height: vars.height };
const inner = insetRect(panel, vars.inset);
const badge = rectCorner(inner, 'topRight');

const Panel = () => (
  <g>
    <rect
      x={panel.x}
      y={panel.y}
      width={panel.width}
      height={panel.height}
      rx={vars.cornerRadius}
      fill={vars.panel}
      stroke="#0f172a"
      strokeWidth={2}
    />
    <circle cx={panel.width * 0.18} cy={panel.height * 0.5} r={22} fill={vars.accent} />
    <rect
      x={inner.x + 12}
      y={inner.y + 28}
      width={inner.width * 0.6}
      height={inner.height * 0.4}
      rx={12}
      fill="#e2e8f0"
      stroke="#0f172a"
      strokeWidth={1.5}
    />
    <circle cx={badge.x - 16} cy={badge.y + 16} r={8} fill={vars.accent} />
  </g>
);

const ReplicadPanel = () => {
  if (!vars.useReplicad) return null;
  const path = draw()
    .rect(vars.width, vars.height)
    .chamfer(6)
    .toSVGPaths()[0];
  return <path d={path} fill="none" stroke="#0f172a" strokeWidth={2} />;
};

const Root = () => (
  <svg viewBox={\`-10 -10 \${vars.width + 20} \${vars.height + 20}\`}>
    <Panel />
    <ReplicadPanel />
  </svg>
);
`;function Sa({ready:s,children:e}){return s?g.jsx(g.Fragment,{children:e}):g.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,border:"1px solid #cbd2d9",background:"#f8fafc",color:"#52606d",fontSize:12},children:[g.jsx("span",{style:{width:10,height:10,borderRadius:"50%",border:"2px solid #cbd2d9",borderTopColor:"#1f2933",display:"inline-block",animation:"spin 1s linear infinite"}}),"Replicad loading…"]})}function _a(s){try{const t=new DOMParser().parseFromString(s,"image/svg+xml").documentElement,o=[],i=(a,h)=>{const d="  ".repeat(h),T=Array.from(a.attributes).map(f=>` ${f.name}="${f.value}"`).join(""),m=Array.from(a.children);if(m.length===0){o.push(`${d}<${a.tagName}${T} />`);return}o.push(`${d}<${a.tagName}${T}>`),m.forEach(f=>i(f,h+1)),o.push(`${d}</${a.tagName}>`)};return i(t,0),o.join(`
`)}catch{return s}}function We(s,e){try{const t=performance.now(),{code:o}=mi(s,{transforms:["typescript","jsx"]}),i=`
      const { useMemo, useState, useEffect, useRef } = React;
      const {
        rectCenter,
        rectCorner,
        insetRect,
        alignCenterX,
        alignCenterY,
        distributeEvenly,
      } = constraints;
      const draw = replicad.draw;
      ${o}
      if (typeof vars === 'object' && vars !== null) {
        Object.assign(vars, overrides ?? {});
      }
      const rootValue = typeof Root !== 'undefined' ? Root : null;
      const element = React.isValidElement(rootValue)
        ? rootValue
        : typeof rootValue === 'function'
          ? React.createElement(rootValue)
          : null;
      const capturedVars = typeof vars === 'object' && vars !== null ? vars : {};
      return { element, vars: capturedVars };
    `,h=new Function("React","constraints","replicad","overrides",i)(Kt,Na,{draw:Er},e),d=performance.now()-t;return{element:h.element,vars:h.vars,error:null,evalMs:d}}catch(t){if(t instanceof Error){const i=t.stack?`
${t.stack}`:"";return{element:null,vars:{},error:`${t.message}${i}`,evalMs:0}}return{element:null,vars:{},error:String(t),evalMs:0}}}function Ra(){const s=G.useMemo(()=>Ta(),[]),e=G.useMemo(()=>ya(s),[s]),[t,o]=G.useState(Ue),[i,a]=G.useState({}),[h,d]=G.useState(()=>We(Ue,{})),[T,m]=G.useState("visual"),[f,k]=G.useState(""),[C,I]=G.useState({nodes:0,bytes:0}),[w,N]=G.useState(0),[j,O]=G.useState([]),[oe,te]=G.useState("info"),[Y,ke]=G.useState(null),[Q,L]=G.useState({state:"idle",ms:0}),U=Kt.useRef(null),ce=Kt.useRef(null),Ee=Kt.useRef(null),xe=()=>{d(We(t,i)),O(b=>[`Ran eval (${t.length} chars)`,...b].slice(0,6))},ge=()=>{o(Ue),a({}),d(We(Ue,{}))},Te=()=>Ee.current?.click(),de=()=>{const b=new Blob([t],{type:"text/plain"}),A=URL.createObjectURL(b),F=document.createElement("a");F.href=A,F.download="trammel-codex.tsx",F.click(),URL.revokeObjectURL(A)},Re=()=>{const b=f||"";if(!b)return;const A=new Blob([b],{type:"image/svg+xml"}),F=URL.createObjectURL(A),W=document.createElement("a");W.href=F,W.download="trammel-codex.svg",W.click(),URL.revokeObjectURL(F)},ye=async b=>{const A=b.target.files?.[0];if(!A)return;const F=await A.text();o(F),a({}),d(We(F,{})),O(W=>[`Imported ${A.name} (${A.size} bytes)`,...W].slice(0,6)),b.target.value=""},Ie=b=>{(b.ctrlKey||b.metaKey)&&b.key==="Enter"&&(b.preventDefault(),xe())},re=G.useMemo(()=>h.element,[h.element]);G.useEffect(()=>{let b=!1;return(async()=>{await e.startAutoLoad();const F=s.getCell("files","default","content");!b&&typeof F=="string"&&F.length>0?(o(F),d(We(F,i)),O(W=>["Loaded saved file",...W].slice(0,6))):b||(s.setRow("files","default",{name:"main.tsx",content:Ue}),o(Ue),d(We(Ue,i)),O(W=>["Initialized default file",...W].slice(0,6))),e.startAutoSave()})(),()=>{b=!0,e.stopAutoSave()}},[e,s]),G.useEffect(()=>{s.setRow("files","default",{name:"main.tsx",content:t})},[t,s]),G.useEffect(()=>{const b=ce.current;if(!b)return;const A=b.querySelector("svg");if(!A){k(""),I({nodes:0,bytes:0});return}const F=performance.now(),le=new XMLSerializer().serializeToString(A);k(_a(le)),N(performance.now()-F),I({nodes:A.querySelectorAll("*").length+1,bytes:le.length}),O(we=>[`Serialized SVG (${le.length} bytes, ${A.querySelectorAll("*").length+1} nodes)`,...we].slice(0,6))},[re,h.error]),G.useEffect(()=>{!h.error||h.error===U.current||(U.current=h.error,O(b=>[`Eval error: ${h.error.split(`
`)[0]}`,...b].slice(0,6)),ke(h.error),te("error"))},[h.error]),G.useEffect(()=>{let b=!0;return L(A=>({...A,state:"loading"})),O(A=>["Replicad init: starting",...A].slice(0,6)),Aa().then(A=>{b&&(A.ok?(L({state:"ready",ms:A.ms}),O(F=>[`Replicad init: ok (${A.ms.toFixed(1)} ms)`,...F].slice(0,6))):(L({state:"error",ms:A.ms,error:A.error}),O(F=>[`Replicad init: error (${A.error??"unknown"})`,...F].slice(0,6))))}),()=>{b=!1}},[]),G.useEffect(()=>{h.error||U.current&&(U.current=null,ke(null),te("info"),O(b=>b.filter(A=>!A.startsWith("Eval error: "))))},[h.error]);const be=Object.entries(h.vars??{}),Le=typeof h.vars?.useReplicad=="boolean"?h.vars.useReplicad:!1;return g.jsxs("div",{style:v.app,children:[g.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"}),g.jsxs("header",{style:v.header,children:[g.jsx("h1",{style:v.title,children:"trammel codex"}),g.jsx("p",{style:v.subtitle,children:"Editor left, SVG viewport right."})]}),g.jsxs("main",{style:v.main,children:[g.jsxs("section",{style:v.panel,children:[g.jsxs("div",{style:v.panelHeader,children:[g.jsx("h2",{style:v.panelTitle,children:"Editor"}),Y?g.jsxs("button",{type:"button",onClick:()=>te("error"),style:v.errorBadge,title:"View error details",children:[g.jsx("span",{style:v.errorDot}),"Error"]}):null]}),g.jsx("textarea",{style:v.editor,value:t,onChange:b=>o(b.target.value),onKeyDown:Ie}),g.jsxs("div",{style:v.actions,children:[g.jsx("button",{style:v.button,type:"button",onClick:xe,children:"Run (Ctrl+Enter)"}),g.jsx("button",{style:{...v.button,background:"#e4e7eb",color:"#1f2933"},type:"button",onClick:ge,children:"Reset Demo"}),g.jsx("button",{style:{...v.button,background:"#fff",color:"#1f2933"},type:"button",onClick:Te,children:"Import .tsx"}),g.jsx("button",{style:{...v.button,background:"#fff",color:"#1f2933"},type:"button",onClick:de,children:"Export .tsx"}),g.jsx("button",{style:{...v.button,background:"#fff",color:"#1f2933"},type:"button",onClick:Re,disabled:!f,children:"Export .svg"})]}),g.jsx("input",{ref:Ee,type:"file",accept:".tsx,.ts,.txt",style:{display:"none"},onChange:ye}),be.length>0?g.jsxs("div",{style:{marginTop:16},children:[g.jsx("h3",{style:{margin:"0 0 8px",fontSize:12,color:"#52606d"},children:"Variables"}),g.jsx("div",{style:{display:"grid",gap:8},children:be.map(([b,A])=>{const F=`var-${b}`,W=typeof A,we=W==="string"&&String(A).startsWith("#")?"color":W==="number"?"number":"text";return g.jsxs("label",{htmlFor:F,style:{display:"grid",gap:4},children:[g.jsx("span",{style:{fontSize:12,color:"#52606d"},children:b}),g.jsx("input",{id:F,type:we,value:String(i[b]??A),onChange:$e=>{const qe=we==="number"?Number($e.target.value):$e.target.value,J={...i,[b]:qe};a(J),d(We(t,J))},style:{border:"1px solid #cbd2d9",borderRadius:6,padding:"6px 8px",fontSize:12}})]},b)})})]}):null]}),g.jsxs("section",{style:v.panel,children:[g.jsxs("div",{style:v.panelHeader,children:[g.jsx("h2",{style:v.panelTitle,children:"Viewport"}),g.jsxs("div",{style:v.tabs,children:[g.jsx("button",{type:"button",onClick:()=>m("visual"),style:{...v.tabButton,...T==="visual"?v.tabButtonActive:null},children:"Visual"}),g.jsx("button",{type:"button",onClick:()=>m("source"),style:{...v.tabButton,...T==="source"?v.tabButtonActive:null},children:"Source"})]})]}),g.jsx("div",{style:v.viewport,ref:ce,children:T==="visual"?Le&&Q.state!=="ready"?g.jsx(Sa,{ready:!1,children:re}):re:g.jsx("pre",{style:v.source,children:f||"No SVG rendered yet."})}),g.jsx("div",{style:v.footer,children:T==="visual"?"Rendered from eval output.":"Serialized SVG source."}),g.jsxs("div",{style:v.diagnostics,children:[g.jsx("h3",{style:v.diagTitle,children:"Diagnostics"}),g.jsxs("div",{style:v.diagTabs,children:[g.jsx("button",{type:"button",onClick:()=>te("info"),style:{...v.diagTab,...oe==="info"?v.diagTabActive:null},children:"Info"}),g.jsx("button",{type:"button",onClick:()=>te("error"),style:{...v.diagTab,...oe==="error"?v.diagTabActive:null},children:"Error"})]}),oe==="info"?g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"Eval time"}),g.jsxs("span",{children:[h.evalMs.toFixed(1)," ms"]})]}),g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"Serialize time"}),g.jsxs("span",{children:[w.toFixed(1)," ms"]})]}),g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"SVG nodes"}),g.jsx("span",{children:C.nodes})]}),g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"SVG size"}),g.jsxs("span",{children:[(C.bytes/1024).toFixed(1)," KB"]})]}),g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"Replicad"}),g.jsx("span",{children:Q.state==="ready"?`Ready (${Q.ms.toFixed(1)} ms)`:Q.state==="loading"?"Loading":Q.state==="error"?"Error":"Idle"})]}),Q.state==="error"&&Q.error?g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"Replicad error"}),g.jsx("span",{children:Q.error})]}):null,g.jsxs("div",{style:v.diagRow,children:[g.jsx("span",{children:"Last error"}),g.jsx("span",{children:Y?Y.split(`
`)[0]:"None"})]}),j.length>0?g.jsx("div",{style:{marginTop:8,display:"grid",gap:4},children:j.map((b,A)=>g.jsx("div",{style:{color:"#52606d"},children:b},`${b}-${A}`))}):null]}):g.jsx("div",{style:v.diagErrorBox,children:Y||"No errors."})]})]})]})]})}function Ga(){return g.jsx(Ra,{})}export{Ga as CodexApp};
