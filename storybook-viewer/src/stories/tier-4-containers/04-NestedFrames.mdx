import { Meta } from '@storybook/blocks';

<Meta title="Tier 4 — Containers/04 Nested Frames" />

# 015 — Nested Frames

<div style={{
  padding: '12px 16px',
  marginBottom: 24,
  background: '#fff8e1',
  border: '1px solid #ffe082',
  borderRadius: 4,
  fontSize: 14,
  color: '#6d4c00',
}}>
  **Spec only** — this component is not yet implemented. The syntax below shows the target API.
</div>

## Description

Three inner Frames inside a single outer Frame. Each inner Frame's `from`/`to` are in the outer Frame's 0..1 space. A circle inside each inner Frame uses 0..1 relative to its inner Frame.

## Elements

| Element | Type | Purpose |
|---------|------|---------|
| `<Frame>` #outer | Container | First coordinate scope |
| `<Frame>` #innerA/#innerB/#innerC | Container | Nested scopes (0..1 within outer) |
| `<Circle>` #dotA/#dotB/#dotC | Primitive | Positioned in each inner Frame's 0..1 space |

## Syntax

```jsx
<Sprite viewBox="0 0 300 300">
  <Frame id="outer" from={{ x: 30, y: 30 }} to={{ x: 270, y: 270 }}>
    {/* Inner Frames: three vertical slices of the outer frame */}
    <Frame id="innerA" from={{ x: 0, y: 0 }} to={{ x: 1/3, y: 1 }}>
      <Circle id="dotA" centerX={0.5} centerY={0.5} r={0.2} fill="#c0392b" />
    </Frame>
    <Frame id="innerB" from={{ x: 1/3, y: 0 }} to={{ x: 2/3, y: 1 }} rotation={-15}>
      <Circle id="dotB" centerX={0.5} centerY={0.5} r={0.2} fill="#2980b9" />
    </Frame>
    <Frame id="innerC" from={{ x: 2/3, y: 0 }} to={{ x: 1, y: 1 }}>
      <Circle id="dotC" centerX={0.5} centerY={0.5} r={0.2} fill="#27ae60" />
    </Frame>
  </Frame>
</Sprite>
```

## Resolver Trace

1. outer: origin = (30, 30), size = (240, 240)
2. innerA: from = (0, 0) → (30, 30); to = (1/3, 1) → (110, 270). Size = (80, 240)
3. innerB: from = (1/3, 0) → (110, 30); to = (2/3, 1) → (190, 270). Size = (80, 240)
4. innerC: from = (2/3, 0) → (190, 30); to = (1, 1) → (270, 270). Size = (80, 240)
5. innerB applies rotation = -15° around its center (still uses the same 0..1 mapping for the dot)
6. Each dot: centerX = 0.5 → x = innerX + 0.5×80; centerY = 0.5 → y = 30 + 0.5×240 = 150
   r = 0.2 → scaled by min(80, 240) = 80 → r = 16

## Expected SVG Output

```svg
<svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
  <g>
    <g><circle cx="70"  cy="150" r="16" fill="#c0392b" /></g>
    <g><circle cx="150" cy="150" r="16" fill="#2980b9" /></g>
    <g><circle cx="230" cy="150" r="16" fill="#27ae60" /></g>
  </g>
</svg>
```

## What This Validates

- Frame transforms compose: inner 0..1 → outer 0..1 → pixel space
- Multiple inner frames share the same parent scope
- Radius scales proportionally (by the smaller Frame dimension)
