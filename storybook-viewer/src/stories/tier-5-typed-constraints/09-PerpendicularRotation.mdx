import { Meta } from '@storybook/blocks';

<Meta title="Tier 5 — Typed Constraints/09 Perpendicular Rotation" />

# 029 — Perpendicular Rotation

<div style={{
  padding: '12px 16px',
  marginBottom: 24,
  background: '#fff8e1',
  border: '1px solid #ffe082',
  borderRadius: 4,
  fontSize: 14,
  color: '#6d4c00',
}}>
  **Spec only** — this component is not yet implemented. The syntax below shows the target API.
</div>

## Description

Two lines where the second is forced perpendicular to the first by adding 90 degrees to the matched angle.

## Elements

| Element | Type | Purpose |
|---------|------|---------|
| `<Line>` #rail | Primitive | Reference line |
| `<Line>` #cross | Primitive | Perpendicular to rail |

## Syntax

```jsx
<Sprite viewBox="0 0 200 200">
  <Line
    id="rail"
    start={{ x: 20, y: 150 }}
    end={{ x: 180, y: 50 }}
    stroke="#333"
    strokeWidth={2}
  />

  <Line
    id="cross"
    start="#rail.midpoint"
    length={60}
    rotate={{ match: '#rail.angle', add: 90 }}
    stroke="#e74c3c"
    strokeWidth={2}
  />
</Sprite>
```

## Resolver Trace

1. rail: midpoint = (100, 100), angle ≈ -32°
2. cross: start = (100, 100), rotate = -32° + 90° = 58°
3. cross end.x = 100 + 60 * cos(58°) ≈ 132
4. cross end.y = 100 + 60 * sin(58°) ≈ 151

## What This Validates

- `rotate=\{\{ match: '#id.angle', add: 90 \}\}` creates perpendicular relationships
- The `add` field is summed with the matched angle
- Line `start` can reference another line's `midpoint` anchor
