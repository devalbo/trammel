import{r as h,R as n,j as e}from"./index-Dh7DDHe0.js";import"./replicad_single-D3vJzVpQ.js";class f{errors=[];report(r){this.errors.push(r)}hasErrors(){return this.errors.length>0}getErrors(){return[...this.errors]}clear(){this.errors=[]}}h.createContext(new f);class E extends n.Component{constructor(r){super(r),this.state={hasError:!1,message:"",componentStack:""}}static getDerivedStateFromError(r){return{hasError:!0,message:r.message,componentStack:r.stack??""}}componentDidCatch(r,a){this.props.collector.report({kind:"render",message:r.message,componentStack:a.componentStack??""})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:12,color:"#be185d",fontSize:12},children:[e.jsx("strong",{children:"Render error:"})," ",this.state.message]}):this.props.children}}function g({message:s}){return e.jsxs("section",{style:{padding:16,border:"1px solid #fecaca",borderRadius:12},children:[e.jsx("h2",{style:{marginTop:0},children:"Claude App Unavailable"}),e.jsx("p",{children:"The Claude bundle failed to load. Other routes should still work."}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"#7f1d1d"},children:s})]})}function j(){const s=n.useRef(null),[r,a]=n.useState(null),[m,l]=n.useState(!0);return n.useEffect(()=>{let d=!0;const i=s.current;if(!i)return;const p=()=>{const t=window.TrammelClaude;if(!t)throw new Error("TrammelClaude bundle did not register.");t.mount({element:i})},c=()=>{window.TrammelClaude?.unmount?.(i)},u=()=>{try{if(!d)return;p(),l(!1)}catch(t){a(t instanceof Error?t.message:String(t)),l(!1)}};if(window.TrammelClaude)return u(),()=>{d=!1,c()};const o=document.createElement("script");return o.src="/trammel/app-claude/trammel-claude.iife.js",o.async=!0,o.onload=u,o.onerror=()=>{a("Failed to load trammel-claude bundle."),l(!1)},document.body.appendChild(o),()=>{d=!1,c()}},[]),r?e.jsx(g,{message:r}):e.jsx("div",{style:{border:"1px solid #e4e7eb",borderRadius:12,padding:16},children:e.jsxs(e.Fragment,{children:[m?e.jsx("div",{children:"Loading Claudeâ€¦"}):null,e.jsx("div",{ref:s})]})})}export{j as default};
