import { Meta } from '@storybook/blocks';

<Meta title="Tier 7 — Combinations/01 Pipe Between Two Tanks" />

# 039 — Pipe Between Two Tanks

<div style={{
  padding: '12px 16px',
  marginBottom: 24,
  background: '#fff8e1',
  border: '1px solid #ffe082',
  borderRadius: 4,
  fontSize: 14,
  color: '#6d4c00',
}}>
  **Spec only** — this component is not yet implemented. The syntax below shows the target API.
</div>

## Description

A rect that auto-stretches between two shapes using dual-anchor fit. Width is implicit — determined by `left` and `right` referencing different shapes. Proves the "responsive connector" pattern.

## Elements

| Element | Type | Purpose |
|---------|------|---------|
| `<Rect>` #tank1 | Primitive | Left fixture |
| `<Rect>` #tank2 | Primitive | Right fixture |
| `<Rect>` #pipe | Primitive | Stretches between them |

## Constraints Used

- `left="#tank1.right"` — pipe starts at tank1's right edge
- `right="#tank2.left"` — pipe ends at tank2's left edge
- Width is implicit: `tank2.left - tank1.right`
- `centerY="#tank1.centerY"` — vertically centered

## Syntax

```jsx
<Sprite viewBox="0 0 300 100">
  <Rect id="tank1" x={20} y={20} width={50} height={60} fill="#4a90d9" rx={4} />
  <Rect id="tank2" x={230} y={20} width={50} height={60} fill="#4a90d9" rx={4} />

  <Rect
    id="pipe"
    left="#tank1.right"
    right="#tank2.left"
    centerY="#tank1.centerY"
    height={12}
    fill="#999"
    stroke="#666"
    rx={2}
  />
</Sprite>
```

## Resolver Trace

1. tank1: right = 70
2. tank2: left = 230
3. pipe: left = 70, right = 230 → width = 160
4. pipe: centerY = tank1.centerY = 50 → y = 50 - 6 = 44

## Expected SVG Output

```svg
<svg viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
  <rect x="20" y="20" width="50" height="60" fill="#4a90d9" rx="4" />
  <rect x="230" y="20" width="50" height="60" fill="#4a90d9" rx="4" />
  <rect x="70" y="44" width="160" height="12" fill="#999" stroke="#666" rx="2" />
</svg>
```

## What This Validates

- Dual `left`/`right` references compute width automatically
- Moving tank2 to x=300 would stretch the pipe to width=230 with no code changes
- This is the key "responsive connector" pattern for assembly diagrams
