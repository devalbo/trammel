import { Meta } from '@storybook/blocks';
import * as Stories from './01-RectAdjacentToRect.stories';
import { LiveCanvas } from '../../components/LiveCanvas';

<Meta of={Stories} />

# Rect Adjacent to Rect

Two rectangles placed side-by-side. Box B's left edge snaps to Box A's right edge using the anchor reference `left="#boxA.right"`.

## Elements

| Element | Type | Purpose |
|---------|------|---------|
| `<Rect>` #boxA | Primitive | The anchor (absolute position) |
| `<Rect>` #boxB | Primitive | The dependent (positioned by reference) |

## Default

<LiveCanvas code={`<Sprite viewBox="0 0 200 100">
  <Rect
    id="boxA"
    x={10}
    y={20}
    width={70}
    height={50}
    fill="#4a90d9"
  />
  <Rect
    id="boxB"
    left="#boxA.right"
    top="#boxA.top"
    width={70}
    height={50}
    fill="#d94a4a"
  />
</Sprite>`} />

## Resolver Trace

1. boxA resolves: x=10, y=20, w=70, h=50 â€” anchors: right=80, top=20
2. boxB reads `#boxA.right` = 80, `#boxA.top` = 20
3. boxB resolves: x=80, y=20, w=70, h=50

## What This Validates

- Reference string parser extracts target ID and anchor name from `"#boxA.right"`
- Solver resolves dependencies in correct order (boxA before boxB)
- Virtual prop `left` correctly maps to SVG `x`
